one.controls.slider=function(){function a(a,b){return b?0==b.indexOf("this::")?a.find(b.replace(/^this::/,one.string.EMPTY)):$(b):null}function b(a){if(a.$element.is(":visible")){var b=a.$element[a.props.size](),c=a.$handle[a.props.outerSize]();a.minPos=0,a.maxPos=b-c;var d=a.settings.minValue,e=a.settings.maxValue,f=e-d;d<0&&e>0&&(f=e+Math.abs(d)),a.ratio=f/a.maxPos,a.range=f,a.ready||(a.value(a._value),a.ready=!0)}}function c(a){one.drag.on("move",this.onDragMove),one.drag.on("stop",this.onDragEnd);var b={moveX:this.settings.orientation==i.HORIZONTAL,moveY:this.settings.orientation==i.VERTICAL,minX:this.minPos,maxX:this.maxPos,minY:this.minPos,maxY:this.maxPos};return one.drag.start(a,this.$handle,b),!1}function d(){g(this),this.fireEvent("change")}function e(){one.drag.off("move",this.onDragMove),one.drag.off("stop",this.onDragEnd)}function f(){b(this)}function g(a){if(a.$text||a.$control){var b=a.value();a.$text&&a.$text.text(b),a.$control&&a.$control.val(b)}}var h={},i={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},j={NORMAL:0,INVERTED:1},k=one.Settings.extend(function(a,b){this.orientation=$(a).hasClass("vertical")?i.VERTICAL:i.HORIZONTAL,this.layout=this.orientation==i.VERTICAL?j.INVERTED:j.NORMAL,this.roundValues=this.getBoolean("roundValues",a,b,!0),this.minValue=this.getNumber("minValue",a,b,0),this.maxValue=this.getNumber("maxValue",a,b,100),this.value=this.getNumber("value",a,b),this.defaultValue=this.getNumber("defaultValue",a,b,this.minValue),this.textElement=this.getString("textElement",a,b,one.string.EMPTY).trim(),this.controlElement=this.getString("controlElement",a,b,one.string.EMPTY).trim(),this.maxValue<this.minValue&&(this.maxValue=this.minValue)}),l=one.HtmlControl.extend(function(g,h){this.construct(g,"change","reset"),this.settings=new k(g,h),this.props=one.HtmlControl.PROPS[this.settings.orientation],this.ready=!1,this.$handle=$("<div class='handle'/>"),this.$element.html(one.string.EMPTY),this.$element.append(this.$handle),this.$text=a(this.$element,this.settings.textElement),this.$control=a(this.$element,this.settings.controlElement),this.$handle.on("mousedown",$.proxy(c,this)),this.$handle.on("dblclick",$.proxy(this.reset,this)),this.onDragMove=$.proxy(d,this),this.onDragEnd=$.proxy(e,this),$(window).on("resize",$.proxy(f,this)),this.minPos=0,this.maxPos=0,this.ratio=0,b(this),this.$element.data("slider",this)});return l.prototype.reset=function(){this.value(this.settings.defaultValue)},l.prototype.value=function(a){if(!this.$element.is(":visible"))return a&&(this._value=a),null!=this._value?this._value:this.initValue;var b=parseFloat(this.$handle.css(this.props.position)),c=this.settings.layout==j.INVERTED?this.settings.minValue+(this.maxPos-b)*this.ratio:this.settings.minValue+b*this.ratio;if(one.type.isNumeric(a)){var d=Math.max(Math.min(parseFloat(a),this.settings.maxValue),this.settings.minValue),e=d!=this._value;if(this._value=d,this._value!=c){var f=this._value-this.settings.minValue;b=f/this.ratio,this.settings.layout==j.INVERTED&&(b=this.maxPos-b),this.$handle.css(this.props.position,b)}g(this),e&&this.fireEvent("change")}else this._value=c;return this.settings.roundValues&&(this._value=Math.round(this._value)),this._value},h.create=function(a,b){if(null==a||0==a.length)return one.log.error("Specify the elements to initialize by using the expression argument");var c=[];return $(a).each(function(a,d){var e=$(d).data("slider")||new l(d,b);c.push(e)}),c.length>1?c:c[0]},$.fn.slider=function(a){return this.each(function(b,c){h.create(c,a)})},h}();