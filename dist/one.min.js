var one=function one($){function Prototype(){}function Settings(){}var one={},$type=new function a(){function a(){return arguments.length?typeof arguments[0]:null}return a.registerNamespace=function(a){for(var b=a.split("."),c=window,d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]={}),c=c[b[d]]},a.isArray=function(a,b){return null==a?b||!1:a.constructor==Array||a!=window&&!$type.isString(a)&&!$type.isFunction(a)&&$type.isNumber(a.length)||b||!1},a.isBoolean=function(b){return null!=b&&("boolean"==a(b)||b.constructor==Boolean)},a.isFunction=function(b,c){return null==b?c||!1:"function"==a(b)||b.constructor==Function||!$type.isString(b)&&Boolean(String(b).match(/\bfunction\b/))||c||!1},a.isNull=function(a){return null==a||void 0==a},a.isNumber=function(b,c){return null==b?c||!1:"number"==a(b)&&isFinite(b)||b.constructor==Number||c||!1},a.isNumeric=function(a){return!isNaN(parseFloat(a))},a.isDate=function(a,b){return null==a?b||!1:$type.isFunction(a.getDate)&&$type.isFunction(a.getTime)||b||!1},a.isObject=function(b,c){return null==b||void 0==b?c||!1:"object"==a(b)&&b.constructor!=String&&b.constructor!=Number||$type.isFunction(b)||c||!1},a.isString=function(b,c){return null==b?c||!1:"string"==a(b)||null!=b&&b.constructor==String||c||!1},a.isNode=function(a){return $type.isObject(a)&&$type.isNumber(a.nodeType)},a.isDocument=function(a){return $type.isNode(a)&&9==a.nodeType},a.isElement=function(a){return $type.isNode(a)&&1==a.nodeType},a.isHtmlElement=function(a){return $type.isElement(a)&&$type.isString(a.className)},a.instanceOf=function(a,b){if(!$type.isObject(a)||!$type.isFunction(b))return!1;if(a instanceof b)return!0;if(a.__type&&a.__type.constructor==b)return!0;if(a.__type&&null!=a.__type.base)for(var c=a;c=c.__type.base;)if(c.__type.constructor==b)return!0;return!1},a["implements"]=function(a,b){var c=!0;if(null==a||null==b)c=!1;else for(var d in b)if(b.hasOwnProperty(d)&&!$type.isFunction(a[d])){c=!1;break}return c},a.extend=function(a,b,c){if(c=c||!1,a&&b)for(var d in b)b.hasOwnProperty(d)&&(void 0==a[d]||c)&&(a[d]=b[d]);return a},a},$string=new function(){function a(a,c,d,e){for(var f=String(a),g=c-f.length,h=[];h.length<g;)h.push(d);return h=h.join(b.EMPTY),2==e?f+h:h+f}var b=this;b.EMPTY="";var c;this.format=function(d){var e=$array.fromArguments(arguments,1);return null==c&&(c=/\{(\d+)([$#])?(\d+)?([+-])?\}/g),String(d).replace(c,function(){try{var c=String(e[arguments[1]])}catch(d){c=b.EMPTY}if(arguments[2]!=b.EMPTY&&arguments[3]!=b.EMPTY){var f="+"==arguments[4]?2:1;c=a(c,arguments[3],"#"==arguments[2]?"0":" ",f)}return c})},this.isEmpty=function(a){return null==a||b.trim(a)==b.EMPTY},this.trim=function(a,b){null==b&&(b="\\s");var c=new RegExp("^["+b+"]*([\\s\\S]*?)["+b+"]*$");return String(a).replace(c,"$1")},this.padLeft=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d=c+d;return d},this.padRight=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d+=c;return d},this.repeat=function(a,c){for(var d=[],e=0;e<c;e++)d.push(a);return d.join(b.EMPTY)},this.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);return a.join(b.EMPTY)},this.substitute=function(a,b){return a&&b?a.replace(/\{([^}{]+)\}/g,function(a,c){return null!=b[c]?b[c]:a}):a},String.prototype.trim=function(a){return b.trim(this,a)},String.prototype.format=function(){return b.format(this,arguments)}},$number=function(){function a(a,b,c){var d=0,e=Number.MAX_VALUE,f=!0;1==arguments.length&&($type.isBoolean(arguments[0])?f=!arguments[0]:$type.isNumber(arguments[0])&&(e=arguments[0])),2==arguments.length&&($type.isBoolean(arguments[1])?(e=parseInt(arguments[0])||0,f=!arguments[1]):$type.isNumber(arguments[1])&&(d=parseInt(arguments[0])||0,e=arguments[1])),3==arguments.length&&(d=parseInt(arguments[0])||0,e=parseInt(arguments[1])||0,f=!arguments[2]);var g=d+(e-d)*Math.random();return f?Math.round(g):g}return{random:a}}(),$array=new function(){this.fromArguments=function(a,b,c){if(null==a)return[];$type.isArray(a)||(a=[a]),1==a.length&&$type.isArray(a[0])&&(a=a[0]),isNaN(parseInt(b))&&(b=0),isNaN(parseInt(c))&&(c=a.length-1);for(var d=[],e=b;e<=c;e++)d.push(a[e]);return 1==d.length&&$type.isArray(d[0])&&(d=d[0]),d},this.flatten=function(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if($type.isArray(c))for(var d=0;d<c.length;d++)$type.isArray(c[d])?a.push.apply(a,this.flatten(c[d])):a.push(c[d]);else a.push(c)}return a};var a={contains:function(a){return this.indexOf(a)>=0},indexOf:function(a,b){var c=isNaN(b)?0:b;if(c<0||c>this.length-1)return-1;for(var d=c;d<this.length;d++)if(this[d]==a)return d;return-1},lastIndexOf:function(a,b){var c=isNaN(b)?this.length-1:b;if(c<0||c>this.length-1)return-1;for(var d=c;d>=0;d--)if(this[d]==a)return d;return-1},every:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(!d)return!1}return!0},some:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(d)return!0}return!1},filter:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++){var e=a.call(b,this[d],d,this);e&&c.push(this[d])}return c},forEach:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++)void 0!==this[c]&&a.call(b,this[c],c,this)},map:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++)void 0!==this[d]&&c.push(a.call(b,this[d],d,this));return c}};$type.extend(Array.prototype,a)},$date=function(){function a(a,b){var c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=$type.isDate(b)?new Date(b):a?new Date(d):new Date(c);if(a)if(/^\d+$/.test(a))e=new Date(parseInt(a));else if(/^([+-])(\d+|\d*\.\d*)([smhdMy])$/.test(a)){var h=RegExp.$1,i=parseFloat(RegExp.$2),j=RegExp.$3,k=$string.concat("get",f[j]),l=$string.concat("set",f[j]),m=Date.prototype[k].apply(e),n="-"==h?m-i:m+i;Date.prototype[l].call(e,n)}else for(var o in g)g.hasOwnProperty(o)&&new function(){var b=g[o];a=a.replace(b.regexp,function(){return e=b.handler(e,arguments),$string.EMPTY})};return e}function b(a,b){return $type.isDate(a)?b?String(b).replace(/yyyy/g,a.getFullYear().toString()).replace(/yy/g,a.getFullYear().toString().substring(2,4)).replace(/MMMM/g,d[a.getMonth()]).replace(/MMM/g,d[a.getMonth()].substring(0,3)).replace(/MM/g,$string.padLeft(a.getMonth()+1,2,0)).replace(/M/g,(a.getMonth()+1).toString()).replace(/dd/g,$string.padLeft(a.getDate(),2,0)).replace(/d/g,a.getDate().toString()).replace(/hh/g,$string.padLeft(a.getHours(),2,0)).replace(/h/g,a.getHours().toString()).replace(/mm/g,$string.padLeft(a.getMinutes(),2,0)).replace(/m/g,a.getMinutes().toString()).replace(/ss/g,$string.padLeft(a.getSeconds(),2,0)).replace(/s/g,a.getSeconds().toString()).replace(/wwww/g,e[a.getDay()]).replace(/www/g,e[a.getDay()].substr(0,3)):h.apply(a):"NaN"}function c(a){return $type.isDate(a)?a:new Date}var d=["January","February","Match","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f={s:"Seconds",m:"Minutes",h:"Hours",d:"Date",M:"Month",y:"FullYear"},g={dayAndMonth1:{regexp:new RegExp("\\b(\\d{1,2})(-|/|\\.)(\\d{1,2})(?:\\2(\\d{2}))?\\b"),handler:function(a,b){var c=parseInt(b[1]),d=parseInt(b[3]),e=b[2];return d>12||"/"==e?(a.setDate(d),a.setMonth(c-1)):(a.setDate(c),a.setMonth(d-1)),isNaN(e)||a.setYear(Number(String((new Date).getFullYear()).substring(0,2)+String(e))),a}},dayAndMonth2:{regexp:new RegExp("(?:\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\s*)?\\b(jan|feb|mar|jun|jul|aug|sep|oct|nov|dec)(?:[a-z]+)?(?:(?:.|-)?\\s*\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\b)?","i"),handler:function(a,b){var c=b[2].toLowerCase(),d=$.inArray(c,"jan|feb|mar|jun|jul|aug|sep|oct|nov|dec".split("|"));a.setMonth(d);var e=parseInt(b[1]),f=parseInt(b[3]);return isNaN(e)||a.setDate(e),isNaN(f)||a.setDate(f),a}},time:{regexp:new RegExp("(?:\\b|T)\\b(\\dd{2}):(\\d{2}):(\\d{2})\\b"),handler:function(a,b){return a.setHours(parseInt(b[1])),a.setMinutes(parseInt(b[1])),a.setSeconds(parseInt(b[1])),a}},year:{regexp:new RegExp("\\b(\\d{4})(?:\\b|T)"),handler:function(a,b){return a.setYear(parseInt(b[1])),a}},today:{regexp:new RegExp("^today$"),handler:function(a){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}}},h=Date.prototype.toString;return Date.prototype.toString=function(a){return b(this,a)},a.format=b,a.year=function(a){return c(a).getFullYear()},a.month=function(a){return c(a).getMonth()},a.day=function i(a){return i(a).getDate()},a.weekday=function(a){return c(a).getDay()},a.hours=function(a){return c(a).getHours()},a.minutes=function(a){return c(a).getMinutes()},a.seconds=function(a){return c(a).getSeconds()},a.time=function(a){return c(a).getTime()},a}(),$function=function(){var a=/^[\s\S$]*?function[\s\n]+(([\w.$]*)[\s\n]*\((.*)\))\W[\s\S]*$/,b={};return b.EMPTY=function(){},b.getName=function(b,c,d){if(0==arguments.length){if(b=arguments.callee.caller,!$type.isFunction(b))return null}else{if(null==b)return null;if(!$type.isFunction(b)&&(b=b.constructor,!$type.isFunction(b)))return null}var e=String(b).replace(a,function(){var a=arguments[2]?arguments[2]:"anonymous",b=arguments[2]?arguments[1]:[a,"(",arguments[3],")"].join($string.EMPTY);return c&&!d?b:c&&d?arguments[3]:a});return e.replace(/([\w\$])\$([\w\$])/g,"$1.$2")},b.callerName=function(){return b.getName(arguments.callee.caller.caller)},b.stackTrace=function(a,c){for(var d=a||arguments.callee.caller,e=[],f=[],g=0;!(null==d||c&&g>=c||f.contains(d));){for(var h=(b.getName(d),[]),i=d.arguments,j=0;j<i.length;j++)$type.isFunction(i[j])&&$type.isFunction(i[j].getName)?h.push(i[j].getName(!0)):$type.isArray(i[j])?h.push("array[{0}]".format(i[j].length)):$type.isObject(i[j])?h.push("object{..}"):$type.isNull(i[j])?h.push("null"):$type.isString(i[j])?h.push(i[j].length<200?'"{0}"'.format(i[j]):"[string({0})]".format(i[j].length)):void 0==i[j]?h.push("undefined"):h.push(i[j]);f.push(d),e.unshift(b.getName(d)+"("+h.join(", ")+")");try{d=d.caller}catch(k){break}g++}return e.toString=function(a){return this.join(a||"\n")},e},b.delay=function(a,b){a.id=setTimeout(b,a.delay)},b}();Prototype.extend=function(a){if(null==a||a==this||null==a.prototype)return a;var b=this,c=$type.isFunction(a)?a:a.constructor;a.prototype.__type={base:b.prototype,constructor:c};for(var d in b.prototype)a.prototype.hasOwnProperty(d)||(a.prototype[d]=b.prototype[d]);return a.extend=a.extend||Prototype.extend,a},Prototype.prototype.construct=function(){if(null!=this.__type){this.$this=this.$this||this;var a=this.$this.__type.base.constructor;this.$this=this.$this.__type.base,a.apply(this,$array.fromArguments(arguments)),delete this.$this}},Prototype.prototype.base=function(a){if(null==this.__type)return null;for(var b=null,c=this,d=arguments.callee.caller;c.__type&&!b;)c.__type.base[a]!=d&&(b=c.__type.base[a]),c=c.__type.base;return"function"==typeof b?b.apply(this,Array.prototype.slice.call(arguments,1)):null},Prototype.prototype.get=function(a){if(1==arguments.length&&this.hasOwnProperty(a))return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Prototype.prototype.set=function(a,b){2==arguments.length&&this.hasOwnProperty(a)&&($type.instanceOf(this[a],Property)?void 0!=b&&this[a].set(b):this[a]=b)};var Dispatcher=Prototype.extend(function(){this.__events=[],this.__listeners={};for(var a=0;a<arguments.length;a++)this.registerEvent(arguments[a])});Dispatcher.prototype.registerEvent=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.hasEvent(b)||(this.__events.push(b),this.__listeners[b]=[])}},Dispatcher.prototype.hasEvent=function(a){return this.__events.contains(a)},Dispatcher.prototype.hasListener=function(a,b){if(this.hasEvent(a))for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return!0;return!1},Dispatcher.prototype.addListener=function(a,b){return this.hasEvent(a)?this.hasListener(a,b)||this.__listeners[a].push(b):$log.error("Did not add event '{0}' because the current object only supports '{1}'",a,this.__events.join(", ")),this},Dispatcher.prototype.on=Dispatcher.prototype.addListener,Dispatcher.prototype.removeListener=function(a,b){if(this.hasEvent(a))if($type.isFunction(b)){for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return this.__listeners[a].splice(c,1),this}else this.__listeners[a]=[];return this},Dispatcher.prototype.off=Dispatcher.prototype.removeListener,Dispatcher.prototype.destroy=function(){for(var a in this.__listeners)this.off(a)},Dispatcher.prototype.fireEvent=function(a,b){var c=null,d=null;$type.instanceOf(a,$evt.Event)?(d=a.type,c=a):(null==b&&(b=this.createEventData()),d=a,c=new $evt.Event(this,d,b));var e=this.__listeners[d];if(null!=e&&0!=e.length){for(var f=0;f<e.length&&(!$type.isFunction(e[f])||(e[f](c),!c.cancel));f++);return c}return null},Dispatcher.prototype.fire=Dispatcher.prototype.fireEvent,Dispatcher.prototype.createEventData=function(a){return{}},Dispatcher.prototype.toString=function(){var a=[];for(var b in this.__listeners)this.__listeners.hasOwnProperty(b)&&a.push("{0}: {1} listeners".format(b,this.__listeners[b].length));return"Dispatcher: {{0}}".format(a.join(", "))};var Property=Dispatcher.extend(function b(a){this.get=b.prototype.get,this.set=b.prototype.set,this["default"]=null,this.id=null,this.type=String,this.restrictTo=null,$.extend(this,a),this.value=this.value||this["default"]});Property.prototype.get=function(){return this._get.apply(this,arguments)},Property.prototype.set=function(a){this._set(a)},Property.prototype._get=function(){return this.value},Property.prototype._set=function(a){var b;switch(this.type){case Boolean:b=null!=String(a).match(/^true|1$/);break;case Number:b=parseFloat(a)||0;break;default:b=null==a?a:String(a)}var c=!0;if(null!=this.restrictTo)if($type.isArray(this.restrictTo))c=[].concat(this.restrictTo).indexOf(b)!=-1;else{c=!1;for(var d in this.restrictTo)if(this.restrictTo.hasOwnProperty(d)&&this.restrictTo[d]==b){c=!0;break}}c&&(this.value=b)},Property.prototype.valueOf=function(){return this.get()},Property.prototype.toString=function(){return String(this.get())};var CookieProperty=Property.extend(function(a){this.construct(a),this.id=this.id||this.name;var b=one.cookie.get(this.id);null!=b&&(this.value=b)});CookieProperty.prototype._set=function(a){return one.cookie.set(this.id,a,null,null,this.path||null),console.log("cookie: "+this.id+"="+a),this.base("_set",a)},Prototype.extend(Settings),Settings.prototype.getValue=function(a,b,c,d,e){var f=b&&b.jquery?b[0]:b,g=c&&c.jquery?c[0]:c,h=a.toLowerCase(),i=d;if($type.isElement(g)?g.getAttribute("data-"+h)?i=g.getAttribute("data-"+h):g.getAttribute(h)&&(i=g.getAttribute(h)):g&&void 0!=g[a]?i=g[a]:$type.isElement(f)?f.getAttribute("data-"+h)?i=f.getAttribute("data-"+h):f.getAttribute(h)&&(i=f.getAttribute(h)):f&&void 0!=f[a]&&(i=f[a]),null!=e){var j=!1;for(var k in e)if(i==e[k]){j=!0;break}j||(i=d)}return i},Settings.prototype.getBoolean=function(a,b,c,d){var e=String(this.getValue(a,b,c,d)).toLowerCase();return"1"==e||"true"==e||"yes"==e},Settings.prototype.getNumber=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return $type.isNumeric(f)?parseFloat(f):0},Settings.prototype.getString=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return null==f?null:String(f)},Settings.prototype.getArray=function(a,b,c,d,e){var f=this.getString(a,b,c,d,e);if(null==f)return[];for(var g=f.split(/,/),h=[],i=0;i<g.length;i++)h.push(g[i].trim());return h},Settings.prototype.getFunction=function(a,b,c,d){var e=this.getValue(a,b,c,d);return one.type.isFunction(e)?e:null},Settings.prototype.setProperties=function(a,b){for(var c in this)if(this.hasOwnProperty(c)&&$type.instanceOf(this[c],Property)){var d=this.getValue(c,a,b,void 0);void 0!=d&&this[c].set(d)}},Settings.prototype.get=function(a){return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Settings.prototype.set=function(a,b){return void 0===this[a]?console.warn("Current settings don't contain a property with name '{0}'.".format(a)):($type.instanceOf(this[a],Property)?this[a].set(b):this[a]=b,this.get(a))};var $css=new function c(){function c(){return 0==arguments.length?(null==a&&(a=c.parseDocument(document)),a):c.computed(arguments[0])}var a=null,b={text:["font-family","font-size","font-weight","font-style","color","text-transform","text-decoration","letter-spacing","word-spacing","line-height","text-align","vertical-align","direction","column-count","column-gap","column-width"],background:["background-color","background-image","background-repeat","background-position","background-attachment","opacity"],box:["width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","-moz-border-top-radius","-moz-border-right-radius","-moz-border-bottom-radius","-moz-border-left-radius","outline-top-width","outline-right-width","outline-bottom-width","outline-left-width","outline-top-color","outline-right-color","outline-bottom-color","outline-left-color","outline-top-style","outline-right-style","outline-bottom-style","outline-left-style"],layout:["position","display","visibility","z-index","overflow","overflow-x","overflow-y","overflow-clip","white-space","clip","float","clear","-moz-box-sizing"],other:["cursor","list-style-image","list-style-position","list-style-type","marker-offset","user-focus","user-select","user-modify","user-input"]};return c.reset=function(){a=null},c.parseDocument=function(a){for(var b={},d=0;d<a.styleSheets.length;d++){var e=c.parseStylesheet(a.styleSheets[d]);for(var f in e)b[f]=e[f]}return b},c.parseStylesheet=function(a){for(var b={},c=a.rules||a.cssRules,d=0;d<c.length;d++)c[d].selectorText&&(b[c[d].selectorText]=c[d]);return b},c.computed=function(a,b){var c={};if(a&&(a=$(a)[0]),!a)return c;for(var d=document.defaultView.getComputedStyle(a,null),e=0;e<d.length;e++){var f=d[e],g=f.replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()});c[g]=d.getPropertyValue(f)}return b?c[b]:c},c.findRules=function(a){var b=c(),d=[];if(a){var e=new RegExp(a);for(var f in b)b.hasOwnProperty(f)&&f.match(e)&&d.push({selector:f,css:b[f]})}return d},c.getRule=function(b){return a[b]},c.getStyle=function(a){var b=c.getRule(a);return b?b.style.cssText:$string.EMPTY},c.getProperty=function(a,b){var d=c.getRule(a);return d?d.style[b]:$string.EMPTY},c.copyStyles=function(a,d,e){if(a&&a.jquery&&(a=a[0]),d&&d.jquery&&(d=d[0]),a&&d){var f=c.computed(a);for(var g in b)if(!e||g==e)for(var h=0;h<b[g].length;h++){var i=b[g][h];void 0!=f[i]&&(d.style[i]=f[i],one.log("{0}: {1}",i,f[i]))}}},c},$dom=new function d(){function a(a){$(a).hide()}function b(a){for(var b=0;b<e.length;b++)for(var c=e[b],d=0;d<c.element.length;d++){var f=c.element.eq(d);if(f.is(":visible")){var g=c.delay,h=$.proxy(c.hide,this,f),i=f.is(a.target)||0!=f.has(a.target).length;if(!i)for(var j=0;j<c.related.length;j++){var k=$(c.related[j]);if(i=k.is(a.target)||0!=k.has(a.target).length)break}i?g&&clearTimeout(c.delayId):g?c.delayId=setTimeout(h,g):h()}}}var c={},e=[],f=!1,g={requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame},d=new Dispatcher("selectionchange");return d.registerAutoHide=function(c){if(c){var d={element:null,delay:0,hide:a,related:[]};c.jquery?d.element=$(c):(d.element=c.element,$type.isNumber(c.delay)&&(d.delay=c.delay),$type.isFunction(c.hide)&&(d.hide=c.hide),$type.isArray(c.related)&&(d.related=c.related)),e.push(d),f||($(document).bind("mousedown touchstart keyup",b),f=!0)}},d.isIE=function(){return window.navigator.userAgent.indexOf("MSIE")!=-1||window.navigator.userAgent.indexOf("Trident")!=-1},d.isTouchDevice=function(){return!!navigator.userAgent.match(/\b(?:iphone|ipod|ipad|android|iemobile|blackberry|bada)\b/i)},d.mouseDownEvent=function(){return d.isTouchDevice()?"touchstart":"mousedown"},d.mouseUpEvent=function(){return d.isTouchDevice()?"touchend":"mouseup"},d.mouseMoveEvent=function(){return d.isTouchDevice()?"touchmove":"mousemove"},d.fastClickEvent=function(){return d.isTouchDevice()?"touchstart":"click"},d.uniqueID=function(a){if(a&&a.jquery&&(a=a[0]),null==a)return null;if($string.isEmpty(a.id)){for(var b=$date.time();null!=c[b];)b++;c[b]=b,a.id="u"+b}return a.id},d.unselectable=function(a){for(var b=(c in{"false":!0,off:!0}),c=b?$string.EMPTY:"none",d=$array.fromArguments(arguments),e=0;e<d.length;e++)$(d[e]).css({"user-select":c,"-o-user-select":c,"-moz-user-select":c,"-khtml-user-select":c,"-webkit-user-select":c,"-ms-user-select":c})},d.requestAnimationFrame=function(a){return(g.requestAnimationFrame||function(){return window.setTimeout(a,1e3/60)})(a)},d.requestInterval=function(a,b){function c(){var g=(new Date).getTime(),h=g-e;h>=b&&(a.call(),e=(new Date).getTime()),f.value=d.requestAnimationFrame(c)}if(!g.requestAnimationFrame)return window.setInterval(a,b);var e=(new Date).getTime(),f={};return f.value=d.requestAnimationFrame(c),f},d.requestTimeout=function(a,b){function c(){var g=(new Date).getTime(),h=g-e;h>=b?a.call():f.value=d.requestAnimationFrame(c)}if(!g.requestAnimationFrame)return window.setTimeout(a,b);var e=(new Date).getTime(),f={};return f.value=d.requestAnimationFrame(c),f},$.fn.unselectable=function(a){return this.each(function(){d.unselectable(a)})},d},$log=function(){function a(a,b){var f="log",g=arguments.length,h=1,i=g-1,j=String(arguments[i]);if((d.contains(j)||e.contains(j))&&(f=j,i=g-2),"dir"!=f&&i>=h){var k=$array.fromArguments(arguments,h,i);a=$string.format(a,k)}for(var l=0;l<c.length;l++){var m=c[l];$type.isFunction(m[f])&&m[f](a)}}var b={},c=[],d=["log","debug","info","warn","error","group","groupCollapsed","groupEnd"],e=[];return a.trace=function(b){var c=Function.stackTrace(arguments.callee.caller);if(arguments.length>0){var d=$array.fromArguments(arguments,1);a.group(b,d);for(var e=0;e<c.length;e++)a.debug(c[e]);a.groupEnd()}else a(c.toString())},a.assert=function(b,c){var d=$array.fromArguments(arguments,2);b===!1&&a(c,d,"error")},a.time=function(a){return console.time?void console.time.apply(console,arguments):void(a&&(b[a]=(new Date).getTime()))},a.timeEnd=function(c){return console.timeEnd?void console.timeEnd.apply(console,arguments):void(b[c]&&a.info("{0}: {1}.ms",c,(new Date).getTime()-b[c]))},a.clear=function(){console.clear()},a.log=function(b){a(b,$array.fromArguments(arguments,1),"log")},a.debug=function(b){a(b,$array.fromArguments(arguments,1),"debug")},a.groupCollapsed=function(b){a(b,$array.fromArguments(arguments,1),"groupCollapsed")},a.group=function(b){a(b,$array.fromArguments(arguments,1),"group")},a.groupEnd=function(){a($string.EMPTY,"groupEnd")},a.info=function(b){a(b,$array.fromArguments(arguments,1),"info")},a.warn=function(b){a(b,$array.fromArguments(arguments,1),"warn")},a.error=function(b){a(b,$array.fromArguments(arguments,1),"error")},a.dir=function(b){a(b,$array.fromArguments(arguments,1),"dir")},a.register=function(a,b){if(null==a||c.contains(a)||c.push(a),b!==!0)for(var d in a)a.hasOwnProperty(d)&&$type.isFunction(a[d])&&(e.contains(d)||e.push(d))},a.unregister=function(a){var b=c.indexOf(a);if(null!=a&&b!=-1){c.splice(b,1);for(var d=e.length-1;d>=0;d--){for(var f=e[d],g=!0,h=0;h<c.length;h++)if($type.isFunction(c[h][f])){g=!1;break}g&&e.splice(d,1)}}},a.register(window.console,!0),a}(),$url=new function e(){function a(a,b){b=b||{},this.separator=b.separator||e.DEFAULT_SEPARATOR,this.equals=b.equals||e.DEFAULT_EQUALS,this.init(),a&&this.parse(a)}var e=function(b){var c=new a;return c.parse($type.isString(b)?b:location.href),c};return e.URL_EXPRESSION=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e.COMPONENT_NAMES=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],e.PROTOCOL_SEPARATOR="://",e.EMPTY_HASH="!",e.DEFAULT_SEPARATOR="&",e.DEFAULT_EQUALS="=",a.prototype.init=function(){return this.components={source:$string.EMPTY,protocol:$string.EMPTY,authority:$string.EMPTY,userInfo:$string.EMPTY,user:$string.EMPTY,password:$string.EMPTY,host:$string.EMPTY,port:$string.EMPTY,relative:$string.EMPTY,path:$string.EMPTY,directory:$string.EMPTY,file:$string.EMPTY,query:$string.EMPTY,hash:$string.EMPTY},this.hashParam={},this.queryParam={},this},a.prototype.qualify=function(a){return a?a.indexOf("//")!=-1?a:0==a.indexOf("/")?[this.components.protocol,e.PROTOCOL_SEPARATOR,this.components.authority,a].join($string.EMPTY):[this.components.protocol,e.PROTOCOL_SEPARATOR,this.components.authority,this.components.directory,a].join($string.EMPTY):$string.EMPTY},a.prototype.getHash=function(a){return e.serializeParams(this.hashParam,{prefix:a||$string.EMPTY})},a.prototype.getQuery=function(a){return e.serializeParams(this.queryParam,{prefix:a||$string.EMPTY})},a.prototype.getQueryParam=function(a){return this.queryParam[a]},a.prototype.getHashParam=function(a){return this.hashParam[a]},a.prototype.setQueryParam=function(a,b){return this.queryParam[a]=b,this},a.prototype.setHashParam=function(a,b){return this.hashParam[a]=b,this},a.prototype.removeQueryParam=function(a){return delete this.queryParam[a],this},a.prototype.removeHashParam=function(a){return delete this.hashParam[a],this},a.prototype.parse=function(a){if(null==a)return this;for(var b=e.URL_EXPRESSION.exec(a),c=e.COMPONENT_NAMES.length-1;c>0;c--)this.components[e.COMPONENT_NAMES[c]]=b[c]||$string.EMPTY;var d=this.components.hash,f=this.components.query;return 0==d.indexOf("!")&&(d=d.substring(1)),this.hashParam=e.parseQuery(d),this.queryParam=e.parseQuery(f),this},a.prototype.toString=function(){var a=this.components.protocol?$string.concat(this.components.protocol,e.PROTOCOL_SEPARATOR):$string.EMPTY;return $string.concat(a,this.components.authority,this.components.path,e.serializeParams(this.queryParam,{prefix:"?",encode:!0}),e.serializeParams(this.hashParam,{prefix:"#",encode:!1}))},e.combine=function(a,b){for(var c=$string.concat(a,"/",b);c.match(/[^\/]+\/\.\.\//);)c=c.replace(/[^\/]+\/\.\.\//,"");return c.replace(/\/{2,}/g,"/")},e.getQueryParam=function(a,b){return e().getQueryParam(a)||b},e.getHashParam=function(a,b){return e().getHashParam(a)||b},e.getHash=function(){return String(location.hash).substring(1)},e.getQuery=function(){return String(location.search).substring(1)},e.setHashParam=function(){var a=e(location.href);if(2==arguments.length)a.setHashParam(arguments[0],arguments[1]);else{if(1!=arguments.length)return;if($type.isObject(arguments[0]))for(var b in arguments[0])arguments[0].hasOwnProperty(b)&&a.setHashParam(b,arguments[0][b]);else a.setHashParam(arguments[0],$string.EMPTY)}e.setHash(a.getHash())},e.setHash=function(a){a==$string.EMPTY&&(a=e.EMPTY_HASH),window.location.hash=a},e.removeHashParam=function(a){var b=e(location);b.removeHashParam(a),e.setHash(b.getHash())},e.getFileExtension=function(a){var b=a?a.lastIndexOf("."):-1;return b>-1?a.slice(b+1):""},e.getFileName=function(a){return String(a).match(/[^\\\/]*$/)[0]},e.parseQuery=function(a,b){if(!a)return{};for(var c=$.extend({separator:e.DEFAULT_SEPARATOR,equals:e.DEFAULT_EQUALS},b||{}),d=String(a).split(c.separator),f={},g=0;g<d.length;g++)if(0!=d[g].length){var h=d[g].split(c.equals),i=h[0],j=h[1]||$string.EMPTY;null!=f[i]?($type.isArray(f[i])||(f[i]=[f[i]]),f[i].push(j)):f[i]=j}return f},e.serializeParams=function(a,b){if(null==a)return null;var c=$.extend({separator:e.DEFAULT_SEPARATOR,equals:e.DEFAULT_EQUALS,encode:!1},b||{}),d=[];for(var f in a)if(a.hasOwnProperty(f)){var g=c.encode?encodeURIComponent(f):f,h=c.encode?encodeURIComponent(a[f]||$string.EMPTY):a[f];h?d.push(g+c.equals+h):d.push(g)}var i=d.join(c.separator);return c.prefix&&i.length?$string.concat(c.prefix,i):i},e.qualify=function(a){var b=$("base[href]").attr("href")||document.location.href;return e(b).qualify(a)},e},$cookie=new function f(){function a(a,c,d,e,f,g){var h=a+"="+encodeURIComponent(c);return d&&(h+="; expires="+$date(d).toGMTString()),e&&(h+="; domain="+e),f&&(h+="; path="+f),g&&(h+="; secure=true"),document.cookie=h,b(a)}function b(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].substring(0,b[c].indexOf("=")),e=b[c].substring(b[c].indexOf("=")+1,b[c].length);if(d==a){if(e.indexOf("&")!=-1){for(var f=e.split("&"),g={},h=0;h<f.length;h++){var i=f[h].split("=");g[i[0]]=i[1]}return g}return decodeURIComponent(e)}}return null}function c(a){var b=a?a+"=null;":"null;";document.cookie=b+"expires="+(new Date).toGMTString()}function f(){return 0==arguments.length?String(document.cookie):1==arguments.length?Cookie.get.apply(this,arguments):a.apply(this,arguments)}return f.get=b,f.set=a,f.remove=c,f},Initializer=Dispatcher.extend(function(a){function b(){f+=1,d.fire("setup",{total:e.length,current:f}),f==e.length&&c()}function c(){d.fire("done"),$type.isFunction(a)&&a()}this.construct("setup","done");var d=this,e=[],f=0;this.register=function(a,b){return $log.assert($type.isObject(a),"Argument 'module' is required"),$log.assert($type.isFunction(a.setup),"The 'module' argument must have a 'setup' method"),e.push({setup:$.proxy(a.setup,a),dispose:$.proxy(a.dispose,a),async:b||!1}),$log.info("Registered module {0}",$type.isFunction(a)?one.func.getName(a):one.func.getName(a.constructor)),a},this.setup=function(){if(0==e.length)c();else{f=0;for(var a=0;a<e.length;a++){var d=e[a];d.async?d.setup(b):(d.setup(),b())}}},this.dispose=function(){for(var a=0;a<e.length;a++){var b=e[a];b.dispose&&b.dispose()}}}),$xml=function(){function a(a){var b={name:"XML Parse Error",error:!1,data:{line:1,column:0}};if($dom.isIE())0!=a.parseError&&(b.error=!0,b.message=a.parseError.reason,a.parseError.line&&(b.data.line=a.parseError.line),a.parseError.column&&(b.data.column=a.parseError.column));else{var c=a.getElementsByTagNameNS(d,"parsererror")[0];if(null!=c){var e=k.text(c).replace(/line(?: number)? (\d+)(?:,)?(?: at)? column (\d+):/i,function(a,c,d){return b.line=parseInt(c),b.column=parseInt(d),a+"\n"});b.error=!0,b.message=e}}if(1==b.error)throw error(b)}function b(){if(null==c){c=new DOMParser;try{d=c.parseFromString("INVALID XML","text/xml").getElementsByTagName("*")[0].namespaceURI}catch(a){e=!0}}return c}var c,d,e=!1,f=document.implementation,g=null!=window.XMLSerializer,h="http://www.w3.org/1999/xhtml",i=5,j={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},k=function(a){return $type.isNode(a)?a:$type.isString(a)&&0==a.trim().indexOf("<")?k.document(a):null};return k.text=function(a,b,c){for(var d=$string.EMPTY,e=null,f={},g=0;g<3&&!(arguments.length<g+1);g++){var h=arguments[g];$type.isNode(h)?e=h:$type.isString(h)?d=h:$type.isObject(h)&&(f=h)}var i=[];if(d==$string.EMPTY&&null==e)return null;i=d==$string.EMPTY&&null!=e?[e]:k.select(d,e||document,f);var l=[];for(g=0;g<i.length;g++){var m=i[g];switch(m.nodeType==j.DOCUMENT&&(m=m.documentElement),
m.nodeType){case j.TEXT:case j.COMMENT:l.push(m.nodeValue);break;default:null!=m.value?l.push(m.value):null!=m.textContent?l.push(m.textContent):null!=m.text?l.push(m.text):l.push(m.innerText)}}return l.join($string.EMPTY)},k.toXml=function(a){return $type.isString(a)&&(a=k.select(a)[0]),$dom.isIE()?a.xml:a==document||a.ownerDocument==document?k.serialize(a):(new XMLSerializer).serializeToString(Node(a))},k.serialize=function(a){if(null==a||null==a.nodeType)return $string.EMPTY;if(a.nodeType==j.DOCUMENT)return k.serialize(a.documentElement);var b=[],c=!1;if(a.nodeType==j.ELEMENT){var d=a.nodeName;a.namespaceURI==h&&(d=d.toLowerCase(),c=!0),b.push("<"),b.push(d);for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e].name,g=a.getAttribute(f);"xmlns"==f&&c||(b.push(" "),b.push(a.attributes[e].name),b.push('="'),b.push(k.escape(g,!0)),b.push('"'))}if(0==a.childNodes.length)b.push("/>");else{for(b.push(">"),e=0;e<a.childNodes.length;e++){var i=a.childNodes[e];i.nodeType==j.ELEMENT&&b.push(k.serialize(i)),i.nodeType==j.COMMENT&&(b.push("<!--"),b.push(k.text(i)),b.push("-->")),i.nodeType==j.CDATA_SECTION&&(b.push("<![CDATA["),b.push(k.text(i)),b.push("]]>")),i.nodeType==j.TEXT&&b.push(k.escape(k.text(i)))}b.push("</"),b.push(d),b.push(">")}}return b.join($string.EMPTY)},k.toObject=function(a){if(null==a||null==a.nodeType)return null;var b={};if(a.nodeType==j.DOCUMENT){var c=a.documentElement.nodeName;b[c]=k.toObject(a.documentElement)}else if(a.nodeType==j.ELEMENT){for(var d=0;d<a.attributes.length;d++)b[a.attributes[d].name]=a.getAttribute(a.attributes[d].name);for(d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(e.nodeType==j.ELEMENT){var f=k.toObject(e);null!=b[e.nodeName]?($type.isArray(b[e.nodeName])||(b[e.nodeName]=[b[e.nodeName]]),b[e.nodeName].push(f)):b[e.nodeName]=f}e.nodeType==j.TEXT&&e.nodeValue.trim()!=$string.EMPTY&&(b.$text=e.nodeValue)}}return b},k.resolver=function(a){return $log.assert($type.isObject(a),"Argument 'namespaces' should be an object"),function(b){return a[b]}},k.select=function(a,b,c){2==arguments.length&&$type.isString(arguments[1])&&(a=arguments[0],c=arguments[1]),$type.isNode(b)||(b=document);var d=b.nodeType==j.DOCUMENT?b:b.ownerDocument;if($dom.isIE()){var e=[];for(var f in c)c.hasOwnProperty(f)&&e.push('xmlns:{0}="{1}"'.format(f,c[f]));return d.setProperty("SelectionNamespaces",e.join(" ")),b.selectNodes(a)}for(var g=c?k.resolver(c):null,h=d.evaluate(a,b,g,i,null),l=h.iterateNext(),m=[];l;)m.push(l),l=h.iterateNext();return m},k.load=function(a,b,c){return $log.assert($type.isString(a),"Argument 'url' is required"),$.ajax(a,{complete:function(a){var d;try{d=k.document(a.responseText),$type.isFunction(b)&&b(d)}catch(e){if(!$type.isFunction(c))throw e;c(e)}},error:function(a,b,d){$type.isFunction(c)&&c(d)}})},k.document=function(c){$type.isDocument(c)&&(c=k.serialize(c));var d=null;return $dom.isIE()?(d=new ActiveXObject("MSXML2.DomDocument"),c&&(d.loadXML(c),a(d))):g&&($type.isString(c)?(d=b().parseFromString(c,"text/xml"),e||a(d)):d=f.createDocument($string.EMPTY,$string.EMPTY,null)),d},k.processor=function(a){if(a=k(a),null==a)return null;var b=null;if($dom.isIE()){var c=k.document(a.xml),d=new ActiveXObject("MSXML2.XslTemplate");d.stylesheet=c,b=d.createProcessor()}else b=new XSLTProcessor,b.importStylesheet(a);return b},k.transform=function(a,b){$log.assert($type.isDocument(a),"Argument 'document' should be a document."),$log.assert(!$type.isNull(b),"Argument 'xslProcessor' is required");var c=null;return $dom.isIE()?(c=k.document(),b.input=a,b.output=c,b.transform()):c=b.transformToDocument(a),c},k.escape=function(a,b){var c=String(a).replace(/&(?!amp;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return b&&(c=c.replace(/\"/g,"&quot;")),c},k.nodeType=j,k}();$xml.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};var $const=new function(){this.Key={TAB:9,CONTROL:17,SHIFT:16,ALT:18,ENTER:13,UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:46,BACKSPACE:8,ESCAPE:27}},$evt=new function(){function a(a){return a||window.event}var b,c=!0;return a.x=function(a){a=a.originalEvent||a;var b=0;return $type.isNumber(a.pageX)?b=a.pageX:$type.isNumber(a.clientX)&&(b=a.clientX),a.touches&&a.touches.length&&(b=a.touches[0].clientX),b},a.y=function(a){a=a.originalEvent||a;var b=0;return $type.isNumber(a.pageY)?b=a.pageY:$type.isNumber(a.clientY)&&(b=a.clientY),a.touches&&a.touches.length&&(b=a.touches[0].clientY),b},a.capture=function(a,b,c){a.addEventListener(b,c,!0)},a.release=function(a,b,c){a.removeEventListener(b,c,!0)},a.getNormalizedWheelDelta=function(a,d){d=d.originalEvent||d;var e={delta:0,deltaX:0,deltaY:0},f=0;if("detail"in d&&(e.deltaY=d.detail*-1),"wheelDelta"in d&&(e.deltaY=d.wheelDelta),"wheelDeltaY"in d&&(e.deltaY=d.wheelDeltaY),"wheelDeltaX"in d&&(e.deltaX=d.wheelDeltaX*-1),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(e.deltaX=e.deltaY*-1,e.deltaY=0),e.delta=0===e.deltaY?e.deltaX:e.deltaY,"deltaY"in d&&(e.deltaY=d.deltaY*-1,e.delta=e.deltaY),"deltaX"in d&&(e.deltaX=d.deltaX,0===e.deltaY&&(e.delta=e.deltaX*-1)),0===e.deltaY&&0===e.deltaX)return e;if(1===d.deltaMode){var g=parseInt(a.css("line-height"));e.delta*=g,e.deltaY*=g,e.deltaX*=g}else if(2===d.deltaMode){var h=a.height();e.delta*=h,e.deltaY*=h,e.deltaX*=h}var i=c&&"mousewheel"===d.type&&f%120===0;return f=Math.max(Math.abs(e.deltaY),Math.abs(e.deltaX)),(!b||f<b)&&(b=f,i&&(b/=40)),i&&(e.delta/=40,e.deltaX/=40,e.deltaY/=40),e.delta=Math[e.delta>=1?"floor":"ceil"](e.delta/b),e.deltaX=Math[e.deltaX>=1?"floor":"ceil"](e.deltaX/b),e.deltaY=Math[e.deltaY>=1?"floor":"ceil"](e.deltaY/b),e},$.fn.wheelDelta=function(b){return a.getNormalizedWheelDelta(this,b)},$.fn.capture=function(b,c){if(!$type.isString(b)||!$type.isFunction(c))return this;var d=b.split(/(?:\s+)|,/);return this.each(function(b,e){for(var f=0;f<d.length;f++)a.capture(e,d[f],c)}),this},$.fn.release=function(b,c){if(!$type.isString(b)||!$type.isFunction(c))return this;var d=b.split(/(?:\s+)|,/);return this.each(function(b,e){for(var f=0;f<d.length;f++)a.release(e,d[f],c)}),this},a.isMouseInRange=function(a,b){if(!one.drag.active){var c=$(b);if(0==c.width()||0==c.height())return!1;var d=c.offset(),e=a.clientX+$(document).scrollLeft(),f=a.clientY+$(document).scrollTop();return e>=d.left&&e<=d.left+c.width()&&f>=d.top&&f<=d.top+c.height()}},a.cancel=function(a){return!1},a.preventDefault=function(b){var b=a(b);return null!=b&&b.preventDefault&&b.preventDefault(),!1},a.stopPropagation=function(b){var b=a(b);null!=b&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())},a.neutralize=function(b){var b=a(b);return null!=b&&(b.cancelBubble=!0,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation()),!1},a.create=function(b,c,d){return new a.Event(b,c,d)},a.Event=function(a,b,c){this.source=a,this.type=b,this.name=b,this.cancel=!1,this.data={};for(var d in c)c.hasOwnProperty(d)&&(this.data[d]=c[d])},a.transitionEnd="transitionend webkitTransitionEnd",a},$drag=function(){function a(a){var b=$evt.x(a),d=$evt.y(a),e=b-f,l=d-g,m=Math.max(Math.min(j.maxX,h+e),j.minX),n=Math.max(Math.min(j.maxY,i+l),j.minY);if(o.__listeners.beforemove.length){var p=$evt.create(o,"beforemove");p.target=k[0],j.moveX&&(p.data.targetX=m),j.moveY&&(p.data.targetY=n),o.fire(p),m=p.data.targetX,n=p.data.targetY}var q=k.position();j.moveX&&k.css("left",m),j.moveY&&k.css("top",n);var r=k.position();return r.left==q.left&&r.top==q.top||(p=$evt.create(o,"move",r),p.target=k[0],o.fire(p)),j.accelX=r.left-q.left,j.accelY=r.top-q.top,c(),$evt.cancel(a)}function b(){var a=$("iframe");a.length>0&&(d(),a.each(function(a,b){if(b.offsetHeight>0){var c=document.createElement("div");c.iframe=b,c.style.cssText=l,c.className=m,document.body.appendChild(c),n.push(c)}}),c())}function c(){for(var a=n.length-1;a>=0;a--){var b=n[a],c=$(b.iframe).offset();b.style.left=c.left+"px",b.style.top=c.top+"px",b.style.width=b.iframe.offsetWidth+"px",b.style.height=b.iframe.offsetHeight+"px"}}function d(){for(var a=n.length-1;a>=0;a--)n[a].parentNode.removeChild(n[a]),n.pop()}function e(a){var b=$(this),c=b.data("options"),d=c.target;one.drag.start(a,d,c)}var f,g,h,i,j={},k=null,l="position: absolute; background: #fff; opacity: .01; z-index:10000;",m="drag-overlay-"+$date.time(),n=[],o=new Dispatcher("start","beforemove","move","stop");return o.active=!1,o.start=function(c,d,e){var l=c||window.event;if(null==l)return!0;if(l.originalEvent&&(l=l.originalEvent),k=$(d),0==k.length)return!0;if(null==e&&(e={}),j.moveX=e.moveX!==!1,j.moveY=e.moveY!==!1,j.accelX=0,j.accelY=0,!j.moveX&&!j.moveY)return!0;j.minX=isNaN(e.minX)?Number.NEGATIVE_INFINITY:e.minX,j.maxX=isNaN(e.maxX)?Number.POSITIVE_INFINITY:e.maxX,j.minY=isNaN(e.minY)?Number.NEGATIVE_INFINITY:e.minY,j.maxY=isNaN(e.maxY)?Number.POSITIVE_INFINITY:e.maxY,f=$evt.x(c),g=$evt.y(c);var m=k.position(),n=k.offset();return h=isNaN(m.left)?n.left:m.left,i=isNaN(m.top)?n.top:m.top,$(document).capture("mouseup touchend",o.stop),$(document).capture("mousemove touchmove",a),b(),o.active=!0,o.fire("start"),$evt.cancel(c)},o.stop=function p(b){var c=$evt.create(o,"stop",{specs:j});c.target=k[0],c.originalEvent=b,o.active=!1,o.fire(c),document.removeEventListener("mousemove",a,!0),document.removeEventListener("touchmove",a,!0),document.removeEventListener("mouseup",p,!0),document.removeEventListener("touchend",p,!0),d(),k=null},$.fn.draggable=function(a){return this.each(function(b,c){var d=$.extend({target:c},a),f=$(c),g=f.find(".handle");0==g.length&&(g=f),g.on("mousedown",e).data("options",d)}),this},o}(),$easing=new function(){this.easeNone=function(a,b,c,d){return c*a/d+b},this.easeIn=function(a,b,c,d){return c*a/d+b},this.easeOut=function(a,b,c,d){return c*a/d+b},this.easeInOut=function(a,b,c,d){return c*a/d+b},this.easeInQuad=function(a,b,c,d){return c*(a/=d)*a+b},this.easeOutQuad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b},this.easeInOutQuad=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},this.easeInCubic=function(a,b,c,d){return c*(a/=d)*a*a+b},this.easeOutCubic=function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},this.easeInOutCubic=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},this.easeInQuart=function(a,b,c,d){return c*(a/=d)*a*a*a+b},this.easeOutQuart=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},this.easeInOutQuart=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},this.easeInQuint=function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},this.easeOutQuint=function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},this.easeInOutQuint=function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},this.easeInExpo=function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},this.easeOutExpo=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},this.easeInOutExpo=function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},this.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},this.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},this.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},this.easeInCirc=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},this.easeOutCirc=function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},this.easeInOutCirc=function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},this.easeInBack=function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},this.easeOutBack=function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},this.easeInOutBack=function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*(a*a*(((e*=1.525)+1)*a-e))+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},this.easeInElastic=function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f))+b},this.easeOutElastic=function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*(2*Math.PI)/f)+c+b},this.easeInOutElastic=function(a,b,c,d,e,f){if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=d*(.3*1.5)),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return a<1?-.5*(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f))+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f)*.5+c+b},this.easeInBounce=function(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},this.easeOutBounce=function(a,b,c,d){return c-this.easeOut(d-a,0,c,d)+b},this.easeInOutBounce=function(a,b,c,d){return a<d/2?.5*this.easeIn(2*a,0,c,d)+b:.5*this.easeOut(2*a-d,0,c,d)+.5*c+b},this.sineLinear=function(a,b,c,d,e,f){d/=1e3,a=1e3-a;var g=e*Math.sin(d*a);return $log("Y: {0} * Math.sin(({1} * {2})) = {3}",e,d,a,g),g};var a={};for(var b in this)this.hasOwnProperty(b)&&$type.isFunction(this[b])&&(a[b]=function(){var a=arguments.callee.fx;return a.apply(this,$array.fromArguments(arguments,1))},a[b].fx=this[b]);a.def="easeOutQuad",a.swing=function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},jQuery.extend(jQuery.easing,a)},ControlTypeInfo=function(a,b,c){function d(){var b=document.createElement("div");return b.setAttribute("id",one.dom.uniqueID(b)),String(a.expression).trim().replace(/\./g," ").match(/([\w\- ]+)/)&&b.setAttribute("className",RegExp.$1),b}function e(b,c){var d=$.extend({},a.options,c);if(null==b){if(!$type.isFunction(this.createElement))throw Error($string.format("No element has been provided and the control '{0}' doesn't have 'createElement' method, therefore a new element can't be created",one.func.getName(this)));b=this.createElement(d)}var e=h(b);if(null==e){var i=g(b);e=new i(b,d),$type.isFunction(e.init)&&e.init(),f(e)}return e}function f(b){$type.instanceOf(b,HtmlControl)&&(b.$element.attr("id",$dom.uniqueID(b.$element)),a.instances.contains(b)||a.instances.push(b))}function g(b){var c=j.defaultConstructor,d=$(b);for(var e in a.registeredConstructors)if(d.is(e)){c=a.registeredConstructors[e];break}return c}function h(b){if(null==b)return null;if(b.jquery&&(b=b[0]),$type.isString(b)&&(b=$(b)[0]),null==b)return null;for(var c=$type.isString(b),d=$type.isElement(b),e=0;e<a.instances.length;e++){var f=a.instances[e];if(d&&f.element()[0]==b)return f;if(c&&f.id()==b)return f}return null}function i(b,c){return $type.isString(b)||$type.isFunction(c)?(a.registeredConstructors[b]=c,null):$log.warn("Arguments expression:String and constructor:Function both need to be used")}a.create=a.create||e,a.createElement=a.createElement||d,a.get=a.get||h,a.register=a.register||i,a.dispose=a.dispose||$function.EMPTY,a.start=a.start||$function.EMPTY,a.instances=[],a.options=$.extend({},b),a.registeredConstructors={},a.registerInstance=f;var j=this;j.type=a,j.defaultConstructor=a.Control||a,j.typeName=one.func.getName(a),j.expression=c||a.expression,j.async=a.async===!0,j.getInstance=h,j.createInstance=e,this.checkType=function(b){if(j.type==b)return!0;if(j.defaultConstructor==b)return!0;for(var c in a.registeredConstructors)if(a.registeredConstructors[c]==b)return!0;return!1},this.redraw=function(){$type.isFunction(a.redraw)&&a.redraw()},this.setup=function(b){a.setup&&a.async?a.setup(b):a.setup?(a.setup(),b()):b()},this.start=function(){a.start()},this.dispose=function(){a.dispose&&a.dispose()}},ControlRegistry=Dispatcher.extend(function(){this.construct(),this.registerEvent("ready"),this.registerEvent("update"),this.started=!1;var a=[],b=[],c=0;this.redraw=function(){for(var b=0;b<a.length;b++)a[b].redraw()},this.register=function(c,d,e){var f,g,h;1==arguments.length&&(g=arguments[0]||{},h={},f=g.expression),2==arguments.length&&(f=arguments[0],g=arguments[1]||{},h={}),3==arguments.length&&(f=arguments[0],g=arguments[1]||{},h=arguments[2]||{}),f&&b.push(f);var i=new ControlTypeInfo(g,h,f);return a.push(i),i.name=$type.isString(g.NAME)?g.NAME:$type.isFunction(g)?one.func.getName(g):one.func.getName(g.constructor),$log.info("Registered control {0}",i.name),g},this.get=function(b,c){if(null==b)return null;if(b.jquery&&(b=b[0]),$type.isString(b)&&(b=$(b)[0]),null==b)return null;for(var d=null,e=0;e<a.length;e++){var f=a[e];if(null!=c){if(f.checkType(c)||f.typeName==c||f.expression.indexOf(c)!=-1){d=f.getInstance(b);break}}else if(d=f.getInstance(b),null!=d)break}return d},this.setup=function(b){if(0==a.length)return void($type.isFunction(b)&&b());for(var c=this,d=0,e=0;e<a.length;e++){var f=a[e];f.setup(function(){++d==a.length&&(c.update(),$type.isFunction(b)&&b())})}},this.dispose=function(){for(var b=0;b<a.length;b++)a[b].dispose()},this.start=function(){for(var b=0;b<a.length;b++)a[b].start();this.fireEvent("ready"),this.started=!0},this.update=function(d){if(c++,c<10){var e=b.join(", "),f=$(e,d||document);if(d&&(f=f.add($(d).filter(e))),f.length>0)for(var g=0;g<a.length;g++){for(var h=0,i=a[g],j=f.filter(i.expression),k=0;k<j.length;k++){var l=i.getInstance(j[k]);null==l&&(i.createInstance(j[k],null,c),h++)}0!=h&&console.log("Created {0} instance(s) of {1}".format(h,i.name))}}else one.log.warn("An attempt was made to recurse into ControlRegistry.update deeper than 10 levels. Check the code for infinite loops");c--,0==c&&this.fireEvent("update")}}),HtmlControl=Dispatcher.extend(function(a){this.construct($array.fromArguments(arguments,1)),this.$element=$(a),this.settings=new Settings});HtmlControl.prototype.id=function(a){return $type.isString(a)&&this.$element.attr("id",a),this.$element.attr("id")},HtmlControl.prototype.destroy=function(){this.base("destroy");for(var a in this)0==a.indexOf("$")&&delete this[a]},HtmlControl.prototype.element=function(){return this.$element},HtmlControl.prototype.update=function(a){a?this.setModel(a):this.binder&&this.binder.update()},HtmlControl.prototype.model=function(a){return void 0!=a&&this.setModel(a),this.getModel()},HtmlControl.prototype.getModel=function(){return this._model},HtmlControl.prototype.setModel=function(a){this._model=a,null==this.binder&&(this.binder=new ModelBinder(this.$element)),this.binder.setModel(a)},HtmlControl.prototype.toString=function(){var a=one.func.getName(this.constructor);if(0==this.$element.length)return $string.format("{0}(null)",a);var b=this.id(),c=this.$element.attr("class"),d=String(this.$element.prop("tagName")).toLowerCase();return $string.format('{0}("{1}{2}{3}")',a,d,c?"."+c.replace(/\s+/,"."):$string.EMPTY,b?"#"+b:$string.EMPTY)},HtmlControl.prototype.get=function(a){return void 0===this.settings?console.warn("Can't get '{0}' because the current control doesn't have an associated settings object.".format(a)):this.settings.get(a)},HtmlControl.prototype.set=function(a,b){return void 0===this.settings?console.warn("Can't set '{0}' to '{1}' because the current control doesn't have an associated settings object.".format(a,b)):(this.settings.set(a,b),this.settings.get(a))},HtmlControl.PROPS={VERTICAL:{scrollSize:"scrollHeight",scrollPos:"scrollTop",offsetPos:"offsetTop",size:"height",outerSize:"outerHeight",position:"top",positionAlt:"bottom",scrollPadding:"paddingRight",scrollPaddingSize:"width",minPos:"minY",maxPos:"maxY",paddingStart:"paddingTop",paddingEnd:"paddingBottom",marginStart:"marginTop",eventPos:"eventY",eventOffsetPos:"offsetY",startEventPos:"startEventY"},HORIZONTAL:{scrollSize:"scrollWidth",scrollPos:"scrollLeft",offsetPos:"offsetLeft",size:"width",outerSize:"outerWidth",position:"left",positionAlt:"right",scrollPadding:"paddingBottom",scrollPaddingSize:"height",minPos:"minX",maxPos:"maxX",paddingStart:"paddingLeft",paddingEnd:"paddingRight",marginStart:"marginLeft",eventPos:"eventX",eventOffsetPos:"offsetX",startEventPos:"startEventX"}};var ModelBinder=function(){function prepareNode(a){switch(a.nodeType){case nodeType.ELEMENT:prepareElementNode.call(this,a);break;case nodeType.TEXT:prepareTextNode.call(this,a);break;default:return}}function prepareElementNode(a){var b,c,d=a.getAttribute("data-foreach-child");if(d){for(b=-1,c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];if(e.nodeType==nodeType.ELEMENT&&e.getAttribute("data-child")==d){b=c+1;break}}if(b!=-1)for(c=a.childNodes.length-1;c>=b;c--)a.removeChild(a.childNodes[c])}for(c=0;c<a.childNodes.length;c++)prepareNode.call(this,a.childNodes[c]);var f=a.getAttribute("data-foreach"),g=a.getAttribute("data-visible");a.getAttribute("data-hidden");if(f){b=this.loops.length;var h=a.ownerDocument.createComment("loopstart_"+b),i=a.ownerDocument.createComment("loopend");a.parentNode.insertBefore(h,a),a.parentNode.insertBefore(i,a),a.parentNode.removeChild(a),a.removeAttribute("data-foreach"),this.loops.push({element:a,expression:f}),attachEvents.call(this,a,null,!0)}else g&&$(a).hide(),attachEvents.call(this,a)}function prepareTextNode(a){var b=prepareTextComments(a,RX_EVAL_EXPRESSION,"expr");b||prepareTextComments(a,RX_SIMPLE_EXPRESSION,"placeholder")}function prepareTextComments(a,b,c){var d=a.nodeValue;if(d.match(b)){var e=0,f=[],g=[];d.replace(b,function(a,b,c){var h=d.substring(e,c);f.push(h),g.push(a),e=c+a.length});for(var h=0;h<f.length;h++)a.parentNode.insertBefore(a.ownerDocument.createTextNode(f[h]),a),a.parentNode.insertBefore(a.ownerDocument.createComment(c+":"+g[h]),a),a.parentNode.insertBefore(a.ownerDocument.createComment("exprend"),a);return a.parentNode.removeChild(a),!0}return!1}function attachEvents(a,b,c){for(var d=0;d<a.childNodes.length;d++)a.childNodes[d].nodeType==nodeType.ELEMENT&&attachEvents.call(this,a.childNodes[d],b,c);for(d=0;d<a.attributes.length;d++){var e=a.attributes[d];if(0==e.name.indexOf("data-emit-")){var f=[],g=e.name.replace("data-emit-",""),h=e.value.replace(/\((.*)\)/,function(a,b){if(b)return f=b.replace(/\s*,\s*/g,",").split(","),""});if(this.registerEvent(h),!c){f=f.map(function(a){return bindString(a,b)});var i=$(a);i.data("emit-"+g,h),i.data("emit-params",f),i.off(g).on(g,$.proxy(onEventHandler,this))}}}}function onEventHandler(a){var b=$(a.currentTarget),c=b.data("emit-"+a.type),d=b.data("emit-params")||{},e=new $evt.Event(this,c,d);e.originalEvent=a,this.fire(e),this.update()}function selectNodeBinder(a,b){for(var c=0;c<b.length;c++)if(b[c].expression){var d=b[c].expression;d=$type.isArray(d)?d:[d];for(var e=0;e<d.length;e++){var f=d[e];if(f&&a.nodeValue.match(f))return b[c].handler}}else{var g=!1,h=a.nodeName,i=b[c].name;for(i=$type.isArray(i)?i:[i],e=0;e<i.length;e++){var j=i[e];if(g=j.indexOf("*")==j.length-1?0==a.nodeName.indexOf(j.substring(0,j.indexOf("*"))):0==j.indexOf("*")?h.substring(h.length-(j.length-1),h.length)==j.substring(1):j==a.nodeName)return b[c].handler}}if(b["*"])return b["*"].handler}function bindNode(a,b){var c=a.nodeType;if(nodeBinders[c]){var d=selectNodeBinder(a,nodeBinders[c]);d&&d.call(this,a,b)}}function bindString(a,b){return evaluateExpression(evaluateExpressions(substitutePlaceholders(a,b),b),b)}function bindAttribute(a,b){var c=a.name.substring(10),d=bindString(a.value,b);attributeParent(a).setAttribute(c,d)}function bindClassAttribute(a,b){var c=attributeParent(a),d={};try{d=JSON.parse(a.nodeValue)}catch(e){return console.debug(a.nodeValue),void console.error(e)}var f=$(c);for(var g in d){var h=bindString(d[g],b),i=1==h||"true"==h;f.toggleClass(g,i)}}function bindVisibilityAttribute(a,b){var c=a.nodeName,d=bindString(a.nodeValue,b),e=1==d||"true"==d,f="data-visible"==c;$(attributeParent(a)).toggle(f?e:!e)}function bindBindAttribute(a,b){var c=attributeParent(a);c.innerHTML=getValue(a.nodeValue,b)}function bindElement(a,b){var c,d=[];for(c=0;c<a.attributes.length;c++)bindNode.call(this,a.attributes[c],b);for(c=0;c<a.childNodes.length;c++)d.push(a.childNodes[c]);var e=!1;for(c=0;c<d.length;c++){var f=d[c];isLoopStart(f)&&!isLoopEnd(d[c+1])?(bindNode.call(this,f,b),e=!0):isLoopEnd(f)&&(e=!1),e||bindNode.call(this,f,b)}}function bindExpressionComment(a,b){cleanupGeneratedContent(a);var c=a.nodeValue.match(RX_EXPR_START)[1],d=evaluateExpressions(c,b),e=a.ownerDocument.createTextNode(d);a.parentNode.insertBefore(e,a.parentNode.childNodes[indexOf(a)+1])}function bindPlaceholderComment(a,b){var c=a.nodeValue.match(RX_PLACEHOLDER_START)[1],d=getCommentText.call(this,a),e=getValue(c,b);if(e!=d){cleanupGeneratedContent(a);var f=a.ownerDocument.createTextNode(e);a.parentNode.insertBefore(f,a.parentNode.childNodes[indexOf(a)+1])}}function bindLoopComment(a,b){var c=a.nodeValue.match(RX_LOOPSTART)[1],d=this.loops[c],e=getValue(d.expression,b);if(JSON.stringify(d.lastCollection)!=JSON.stringify(e)){cleanupGeneratedContent(a),d.lastCollection=e;var f=a.parentNode.childNodes[indexOf(a)+1],g=0;for(var h in e)if(e.hasOwnProperty(h)){var i=d.element.cloneNode(!0);i._generated=!0;var j=$.extend({},b);$type.isObject(e[h])&&(j=$.extend(j,e[h])),j=$.extend(j,{_:e[h],$index:g,$current:e[h],$key:h}),bindNode.call(this,i,j),attachEvents.call(this,i,j);var k=a.parentNode.insertBefore(i,f);one.controls.update(k),g+=1}}}function reset(a){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];d.nodeType==nodeType.COMMENT&&(d.nodeValue.match(RX_LOOPSTART)||d.nodeValue.match(RX_EXPR_START)||d.nodeValue.match(RX_PLACEHOLDER_START))&&b.push(d)}for(var e=0;e<b.length;e++)cleanupGeneratedContent(b[e]);for(var f=0;f<a.attributes.length;f++){var g=a.attributes[f];if(0==g.name.indexOf("data-attr-")){var h=g.name.substring(10);a.removeAttribute(h)}}}function getCommentText(a){for(var b=getCommentNodes.call(this,a),c=[],d=0;d<b.length;d++)c.push(b[d].textContent);return c.join("")}function getCommentNodes(a){for(var b=a.nodeValue.match(RX_LOOPSTART)?RX_LOOPEND:RX_EXPR_END,c=a.parentNode,d=[],e=!1,f=0;f<c.childNodes.length;f++){var g=c.childNodes[f];if(g!=a){if(e){if(g.nodeType==nodeType.COMMENT&&g.nodeValue.match(b))break;d.push(g)}}else e=!0}return d}function cleanupGeneratedContent(a){for(var b=getCommentNodes.call(this,a),c=a.parentNode,d=0;d<b.length;d++)c.removeChild(b[d])}function evaluateExpressions(a,b){for(;a.match(RX_EVAL_EXPRESSION);)a=a.replace(RX_EVAL_EXPRESSION,function(a,c){return evaluateExpression(c,b)});return a}function substitutePlaceholders(a,b){return a.replace(RX_SIMPLE_EXPRESSION,function(a,c){if(isValidModelProperty(c,b))return defaultIfNull(getValue(c,b))})}function evaluateExpression(text,model){var expression=substituteExpression(text,model);try{with(model)return eval(expression)}catch(error){return console.error(expression+": "+error),error}}function substituteExpression(a,b){var c=a.split(/\s/);return c.map(function(a){return getValue(a,b)}),c.join(" ")}function indexOf(a){for(var b=0;b<a.parentNode.childNodes.length;b++)if(a.parentNode.childNodes[b]==a)return b;return-1}function getValue(a,b){return a.match(RX_EVAL_EXPRESSION)?evaluateExpressions(RegExp.$1,b):isValidModelProperty(a,b)?getModelValue(a,b):a}function getModelValue(a,b){if(b[a])return b[a];for(var c,d,e=a.split("."),f=0,g=b;null!=g&&f<e.length;)d=e[f++],g=g[d],c=g;return defaultIfNull(c)}function defaultIfNull(a,b){return void 0!=b&&null!=b||(b=""),void 0!=a&&null!=a||(a=b),a}function isValidModelProperty(a,b){var c=a.split(".")[0];return void 0!=b[c]}function isLoopStart(a){return a.nodeType==nodeType.COMMENT&&null!=a.nodeValue.match(RX_LOOPSTART)}function isLoopEnd(a){return a.nodeType==nodeType.COMMENT&&null!=a.nodeValue.match(RX_LOOPEND)}function attributeParent(a){return a.parentNode||a.ownerElement}var RX_SIMPLE_EXPRESSION=/@\.([\w$.]+)/g,RX_EVAL_EXPRESSION=/@\(([^()]+)\)/g,RX_LOOPSTART=/^loopstart_(\d+)$/,RX_LOOPEND=/^loopend$/,RX_EXPR_START=/^expr:(@\(.+\))$/,RX_PLACEHOLDER_START=/^placeholder:@.(.+)$/,RX_EXPR_END=/^exprend$/,RX_MODEL_EVAL_EXPRESSION=/#\.([\w$.]+)/g,initialized=[],nodeType=$xml.nodeType,nodeBinders={1:[],2:[],3:[],8:[]},ModelBinder=Dispatcher.extend(function(a){this.construct(),this.loops=[],this.element=null,this.template=null,this._model=null,a&&this.initialize(a)});return ModelBinder.prototype.initialize=function(a){this.loops=[],this.element=$(a)[0],initialized.indexOf(this.element)==-1?(prepareNode.call(this,this.element),this.element.loops=this.loops,initialized.push(this.element)):this.loops=this.element.loops},ModelBinder.prototype.setModel=function(a){this._model=a,this.element&&bindNode.call(this,this.element,this._model)},ModelBinder.prototype.model=function(a){return void 0!=a&&this.setModel(a),this.getModel()},ModelBinder.prototype.getModel=function(){return this._model},ModelBinder.prototype.update=function(a){a?this.setModel(a):bindNode.call(this,this.element,this._model)},ModelBinder.prototype.evaluateExpression=function(a){return bindString(a,this._model)},ModelBinder.prototype.getValue=function(a){return getValue(a,this._model)},ModelBinder.registerNodeBinder=function(a,b){nodeBinders[a].push(b)},ModelBinder.registerNodeBinder(nodeType.ATTRIBUTE,{name:"data-attr-*",handler:bindAttribute}),ModelBinder.registerNodeBinder(nodeType.ATTRIBUTE,{name:"data-class",handler:bindClassAttribute}),ModelBinder.registerNodeBinder(nodeType.ATTRIBUTE,{name:"data-bind",handler:bindBindAttribute}),ModelBinder.registerNodeBinder(nodeType.ATTRIBUTE,{name:["data-visible","data-hidden"],handler:bindVisibilityAttribute}),ModelBinder.registerNodeBinder(nodeType.ELEMENT,{name:"*",handler:bindElement}),ModelBinder.registerNodeBinder(nodeType.COMMENT,{expression:RX_EXPR_START,handler:bindExpressionComment}),ModelBinder.registerNodeBinder(nodeType.COMMENT,{expression:RX_PLACEHOLDER_START,handler:bindPlaceholderComment}),ModelBinder.registerNodeBinder(nodeType.COMMENT,{expression:RX_LOOPSTART,handler:bindLoopComment}),ModelBinder}(),FastClick=HtmlControl.extend(function(a,b){this.construct(a),this.handler=b,this.eventHandler=$.proxy(this.handleEvent,this),this.$element.on("touchstart click",this.eventHandler)});FastClick.coordinates=[],FastClick.preventGhostClick=function(a,b){FastClick.coordinates.push(a,b),window.setTimeout(FastClick.pop,2500)},FastClick.pop=function(){FastClick.coordinates.splice(0,2)},FastClick.onDocumentClick=function(a){for(var b=0;b<FastClick.coordinates.length;b+=2){var c=FastClick.coordinates[b],d=FastClick.coordinates[b+1];Math.abs(a.clientX-c)<25&&Math.abs(a.clientY-d)<25&&(a.stopPropagation(),a.preventDefault())}},FastClick.prototype.handleEvent=function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onClick(a);break;case"click":this.onClick(a)}},FastClick.prototype.reset=function(){this.$element.off("touchend",this.eventHandler),$(document).off("touchmove",this.eventHandler)},FastClick.prototype.onTouchStart=function(a){var b=a.originalEvent||a;b.stopPropagation(),this.$element.on("touchend",this.eventHandler),$(document).on("touchmove",this.eventHandler),this.startX=b.touches[0].clientX,this.startY=b.touches[0].clientY},FastClick.prototype.onTouchMove=function(a){var b=a.originalEvent||a;(Math.abs(b.touches[0].clientX-this.startX)>10||Math.abs(b.touches[0].clientY-this.startY)>10)&&this.reset()},FastClick.prototype.onClick=function(a){a.stopPropagation(),this.reset(),this.handler(a),"touchend"==a.type&&FastClick.preventGhostClick(this.startX,this.startY)},document.addEventListener("click",FastClick.onDocumentClick,!0),$.fastclick=function(a,b){$(a).fastclick(b)},$.fn.fastclick=function(){var a=arguments[0];return this.each(function(){var b=$(this);b.data("fastclick")||b.data("fastclick",new FastClick(b,a))}),this};var $image=new function g(){function a(a){function b(){e.effect.init&&e.effect.init(d,e),d.fireEvent("start"),d.animating=!0,f(h(c,d))}var d=this,e=this.__transition;if(e.effect=g.Transitions[e.effect]||g.Transitions.horizontalOpen,e.easingFx=$easing[e.easing]||$easing.easeOutQuad,e.from=this.cloneCurrent(),e.to instanceof Image)b();else{var i=e.to;
e.to=new Image,e.to.onload=b,e.to.src=i}}function b(a){function b(){c.$image2.attr("src",a.to.src),c.$image2.css({opacity:0,display:"block"}),c.$image2.animate({opacity:1}),c.$element.animate({opacity:0},{duration:a.duration,easing:a.easing,progress:function b(a,b,d){c.fireEvent("progress",{progress:b})},complete:function(){var a=c.$image2,b=c.$element;c.$element.hide().addClass("image2"),c.$image2.removeClass("image2"),c.$element=a,c.$image2=b,c.fireEvent("done")}}),c.fireEvent("start")}var c=this;a.to instanceof Image?b():(a.to=new Image,a.to.onload=b,a.to.src=src)}function c(){var a=$date.time(),b=this.__transition,d=b.easingFx(a-b.start,0,1,b.duration);return a>=b.end?(this.clear(),this.fireEvent("done"),this.animating=!1,this.drawImage(b.to)):(b.effect.render(this,b,d),this.fireEvent("progress",{progress:d}),f(h(c,this)),void 0)}function d(){var a=document.createElement("canvas");return!(null==a||null==a.getContext||null==a.getContext("2d"))}function g(a){return new e(a)}var e=HtmlControl.extend(function(a){this.construct(a,"start","progress","done");var b=d();if(b){var c=this.$element.prop("tagName");if("CANVAS"==c)this.canvas=this.$element[0];else{var e=this.$element.parent().find("canvas")[0];if(null==e&&(e=document.createElement("canvas"),e.width=this.$element.width(),e.height=this.$element.height(),this.$element.parent().append(e)),"IMG"==c){var f=new Image;f.onload=function(){0!=e.width&&0!=e.height||(e.width=f.width,e.height=f.height);var a=e.getContext("2d");a.drawImage(f,0,0,e.width,e.height)},f.src=this.$element.prop("src")}this.canvas=e,this.context=e.getContext("2d"),this.$element.hide()}}else{this.$image2=$("<img/>");for(var g=0;g<this.$element[0].attributes.length;g++){var h=this.$element[0].attributes[g];this.$image2.attr(h.name,h.value)}this.$image2.hide(),this.$image2.addClass("image2"),this.$element.parent().append(this.$image2)}});e.prototype.drawImage=function(a){return this.clear(),this.context.drawImage(a,0,0,this.canvas.width,this.canvas.width*a.height/a.width)},e.prototype.cloneCurrent=function(){var a=document.createElement("canvas");return a.width=this.canvas.width,a.height=this.canvas.height,a.getContext("2d").drawImage(this.canvas,0,0,a.width,a.height),a},e.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.transition=function(c){var d=this.__transition=$.extend(g.transitionDefaults,c);d.start&&this.on("start",d.start),d.progress&&this.on("progress",d.progress),d.done&&this.on("done",d.done),d.start=$date.time(),d.end=d.start+d.duration,null!=this.canvas?a.call(this,c):b.call(this,c)};var f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)},h=function(a,b){return function(){return a.apply(b,arguments)}};g.getData=function(a){var b=document.createElement("canvas");b.width=a.width,b.height=a.height;var c=b.getContext("2d");c.drawImage(a,0,0,b.width,b.height);var d=c.getImageData(0,0,b.width,b.height);return b=null,c=null,d},g.transitionDefaults={duration:1e3,transition:"horizontalOpen",easing:"easeOutExpo"};var i=new function(){var a=Prototype.extend(function(a){a&&$type.isFunction(a.init)&&(this.init=a.init),a&&$type.isFunction(a.render)&&(this.render=a.render)});a.prototype.init=function(a,b){this.options=$.extend({},b.options)},a.prototype.render=function(a,b,c){};var b=Prototype.extend(function(a){this.clipFunction=a});b.prototype.render=function(a,b,c){var d=a.canvas,e=a.canvas.getContext("2d");a.drawImage(b.from),e.save(),e.beginPath(),this.clipFunction(e,d.width,d.height,c),e.clip(),a.drawImage(b.to),e.restore()},this.clock=new b(function(a,b,c,d){return a.moveTo(b/2,c/2),a.arc(b/2,c/2,Math.max(b,c),0,2*Math.PI*d,!1)}),this.circle=new b(function(a,b,c,d){return a.arc(b/2,c/2,.6*d*Math.max(b,c),0,2*Math.PI,!1)}),this.diamond=new b(function(a,b,c,d){var e,f,g,h;return h=b/2,g=c/2,e=d*c,f=d*b,a.moveTo(h,g-e),a.lineTo(h+f,g),a.lineTo(h,g+e),a.lineTo(h-f,g)}),this.verticalOpen=new b(function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;for(h=8,j=c/(2*h),m=j,i=d*b/2,n=b/2-i,o=b/2+i,k=n-m,l=o+m,a.moveTo(n,0),g=0;0<=h?g<=h:g>=h;0<=h?g++:g--)e=2*g*j,f=e+j,a.lineTo(k,e),a.lineTo(n,f);for(a.lineTo(l,c),p=[],g=h;h<=0?g<=0:g>=0;h<=0?g++:g--)e=2*g*j,f=e-j,a.lineTo(o,e),p.push(a.lineTo(l,f));return p}),this.horizontalOpen=new b(function(a,b,c,d){return context.rect(0,(1-progress)*height/2,width,height*progress)}),this.horizontalSunblind=new b(function(a,b,c,d){var e,f,g,h;for(d=1-(1-d)*(1-d),g=6,f=c/g,h=[],e=0;0<=g?e<=g:e>=g;0<=g?e++:e--)h.push(a.rect(0,f*e,b,f*d));return h}),this.verticalSunblind=new b(function(a,b,c,d){var e,f,g,h,i;for(d=1-(1-d)*(1-d),g=10,f=b/g,i=[],e=0;0<=g?e<=g:e>=g;0<=g?e++:e--)h=Math.max(0,Math.min(2*d-(e+1)/g,1)),i.push(a.rect(f*e,0,f*h,c));return i}),this.circles=new b(function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;for(h=6,g=Math.floor(h*b/c),f=b/g,e=c/h,l=Math.max(b,c),k=.7*Math.max(f,e),p=[],n=0;0<=g?n<=g:n>=g;0<=g?n++:n--)p.push(function(){var c;for(c=[],o=0;0<=h?o<=h:o>=h;0<=h?o++:o--)i=(n+.5)*f,j=(o+.5)*e,m=Math.max(0,Math.min(2*d-i/b,1))*k,a.moveTo(i,j),c.push(a.arc(i,j,m,0,2*Math.PI,!1));return c}());return p}),this.squares=new b(function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;for(d=1-(1-d)*(1-d),h=5,g=Math.floor(h*b/c),f=b/g,e=c/h,p=[],n=0;0<=g?n<=g:n>=g;0<=g?n++:n--)p.push(function(){var g;for(g=[],o=0;0<=h?o<=h:o>=h;0<=h?o++:o--)l=f*n,m=e*o,i=Math.max(0,Math.min(3*d-l/b-m/c,1)),k=f*i,j=e*i,g.push(a.rect(l-k/2,m-j/2,k,j));return g}());return p}),this.fadeLeft=new a({init:function(a,b){this.options=$.extend({direction:"right"},b.options),b.randomTrait=[],b.fromData=g.getData(b.from),b.toData=g.getData(b.to),b.output=a.context.createImageData(a.canvas.width,a.canvas.height);for(var c=a.canvas.height,d=0;0<=c?d<=c:d>=c;0<=c?d++:d--)b.randomTrait[d]=Math.random()},render:function(a,b,c,d){for(var e=150,f=(a.canvas.height,a.canvas.width),g=b.fromData.data,h=b.toData.data,i=b.output.data,j=f*c/e,k=0;k<f;++k)for(var l=k/e,m=0;m<a.canvas.height;++m){for(var n=4*(m*f+k),o=Math.min(Math.max(l-j*(1+b.randomTrait[m]/10),0),1),p=1-o,q=0;q<3;++q){var r=n+q;i[r]=o*g[r]+p*h[r]}i[n+3]=255}return a.context.putImageData(b.output,0,0)}})};return g.Transitions=i,g.load=function(a){var b=new Image;return $.Deferred(function(c){b.onload=function(){c.resolve(b)},b.onerror=function(){c.fail(b)},b.src=a}).promise()},g};return one.Prototype=Prototype,one.Property=Property,one.CookieProperty=CookieProperty,one.Dispatcher=Dispatcher,one.Settings=Settings,one.Initializer=Initializer,one.HtmlControl=HtmlControl,one.ModelBinder=ModelBinder,one.type=$type,one.string=$string,one.func=$function,one.array=$array,one.date=$date,one.log=$log,one.css=$css,one.dom=$dom,one.url=$url,one.cookie=$cookie,one.xml=$xml,one["const"]=$const,one.event=$evt,one.drag=$drag,one.easing=$easing,one.number=$number,one.image=$image,one.controls=new ControlRegistry,one.controls.Registry=ControlRegistry,one.controls.TypeInfo=ControlTypeInfo,one.init=new Initializer,one.init.register(one.controls,!0),one.init.on("done",$.proxy(one.controls.start,one.controls)),$(window).on("load",one.init.setup).on("unload",one.init.dispose),one}(window.jQuery);