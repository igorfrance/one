function Prototype(){}function Settings(){}function Prototype(){}function Settings(){}var $array=new function(){this.fromArguments=function(a,b,c){if(null==a)return[];$type.isArray(a)||(a=[a]),1==a.length&&$type.isArray(a[0])&&(a=a[0]),isNaN(parseInt(b))&&(b=0),isNaN(parseInt(c))&&(c=a.length-1);for(var d=[],e=b;e<=c;e++)d.push(a[e]);return 1==d.length&&$type.isArray(d[0])&&(d=d[0]),d},this.flatten=function(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if($type.isArray(c))for(var d=0;d<c.length;d++)$type.isArray(c[d])?a.push.apply(a,this.flatten(c[d])):a.push(c[d]);else a.push(c)}return a};var a={contains:function(a){return this.indexOf(a)>=0},indexOf:function(a,b){var c=isNaN(b)?0:b;if(c<0||c>this.length-1)return-1;for(var d=c;d<this.length;d++)if(this[d]==a)return d;return-1},lastIndexOf:function(a,b){var c=isNaN(b)?this.length-1:b;if(c<0||c>this.length-1)return-1;for(var d=c;d>=0;d--)if(this[d]==a)return d;return-1},every:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(!d)return!1}return!0},some:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(d)return!0}return!1},filter:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++){var e=a.call(b,this[d],d,this);e&&c.push(this[d])}return c},forEach:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++)void 0!==this[c]&&a.call(b,this[c],c,this)},map:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++)void 0!==this[d]&&c.push(a.call(b,this[d],d,this));return c}};$type.extend(Array.prototype,a)},CookieProperty=Property.extend(function(a){this.construct(a),this.id=this.id||this.name;var b=one.cookie.get(this.id);null!=b&&(this.value=b)});CookieProperty.prototype._set=function(a){return one.cookie.set(this.id,a,null,null,this.path||null),console.log("cookie: "+this.id+"="+a),this.base("_set",a)};var $date=function(){function a(a,b){var c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=$type.isDate(b)?new Date(b):a?new Date(d):new Date(c);if(a)if(/^\d+$/.test(a))e=new Date(parseInt(a));else if(/^([+-])(\d+|\d*\.\d*)([smhdMy])$/.test(a)){var h=RegExp.$1,i=parseFloat(RegExp.$2),j=RegExp.$3,k=$string.concat("get",f[j]),l=$string.concat("set",f[j]),m=Date.prototype[k].apply(e),n="-"==h?m-i:m+i;Date.prototype[l].call(e,n)}else for(var o in g)g.hasOwnProperty(o)&&new function(){var b=g[o];a=a.replace(b.regexp,function(){return e=b.handler(e,arguments),$string.EMPTY})};return e}function b(a,b){return $type.isDate(a)?b?String(b).replace(/yyyy/g,a.getFullYear().toString()).replace(/yy/g,a.getFullYear().toString().substring(2,4)).replace(/MMMM/g,d[a.getMonth()]).replace(/MMM/g,d[a.getMonth()].substring(0,3)).replace(/MM/g,$string.padLeft(a.getMonth()+1,2,0)).replace(/M/g,(a.getMonth()+1).toString()).replace(/dd/g,$string.padLeft(a.getDate(),2,0)).replace(/d/g,a.getDate().toString()).replace(/hh/g,$string.padLeft(a.getHours(),2,0)).replace(/h/g,a.getHours().toString()).replace(/mm/g,$string.padLeft(a.getMinutes(),2,0)).replace(/m/g,a.getMinutes().toString()).replace(/ss/g,$string.padLeft(a.getSeconds(),2,0)).replace(/s/g,a.getSeconds().toString()).replace(/wwww/g,e[a.getDay()]).replace(/www/g,e[a.getDay()].substr(0,3)):h.apply(a):"NaN"}function c(a){return $type.isDate(a)?a:new Date}var d=["January","February","Match","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f={s:"Seconds",m:"Minutes",h:"Hours",d:"Date",M:"Month",y:"FullYear"},g={dayAndMonth1:{regexp:new RegExp("\\b(\\d{1,2})(-|/|\\.)(\\d{1,2})(?:\\2(\\d{2}))?\\b"),handler:function(a,b){var c=parseInt(b[1]),d=parseInt(b[3]),e=b[2];return d>12||"/"==e?(a.setDate(d),a.setMonth(c-1)):(a.setDate(c),a.setMonth(d-1)),isNaN(e)||a.setYear(Number(String((new Date).getFullYear()).substring(0,2)+String(e))),a}},dayAndMonth2:{regexp:new RegExp("(?:\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\s*)?\\b(jan|feb|mar|jun|jul|aug|sep|oct|nov|dec)(?:[a-z]+)?(?:(?:.|-)?\\s*\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\b)?","i"),handler:function(a,b){var c=b[2].toLowerCase(),d=$.inArray(c,"jan|feb|mar|jun|jul|aug|sep|oct|nov|dec".split("|"));a.setMonth(d);var e=parseInt(b[1]),f=parseInt(b[3]);return isNaN(e)||a.setDate(e),isNaN(f)||a.setDate(f),a}},time:{regexp:new RegExp("(?:\\b|T)\\b(\\dd{2}):(\\d{2}):(\\d{2})\\b"),handler:function(a,b){return a.setHours(parseInt(b[1])),a.setMinutes(parseInt(b[1])),a.setSeconds(parseInt(b[1])),a}},year:{regexp:new RegExp("\\b(\\d{4})(?:\\b|T)"),handler:function(a,b){return a.setYear(parseInt(b[1])),a}},today:{regexp:new RegExp("^today$"),handler:function(a){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}}},h=Date.prototype.toString;return Date.prototype.toString=function(a){return b(this,a)},a.format=b,a.year=function(a){return c(a).getFullYear()},a.month=function(a){return c(a).getMonth()},a.day=function i(a){return i(a).getDate()},a.weekday=function(a){return c(a).getDay()},a.hours=function(a){return c(a).getHours()},a.minutes=function(a){return c(a).getMinutes()},a.seconds=function(a){return c(a).getSeconds()},a.time=function(a){return c(a).getTime()},a}(),Dispatcher=Prototype.extend(function(){this.__events=[],this.__listeners={};for(var a=0;a<arguments.length;a++)this.registerEvent(arguments[a])});Dispatcher.prototype.registerEvent=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.hasEvent(b)||(this.__events.push(b),this.__listeners[b]=[])}},Dispatcher.prototype.hasEvent=function(a){return this.__events.contains(a)},Dispatcher.prototype.hasListener=function(a,b){if(this.hasEvent(a))for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return!0;return!1},Dispatcher.prototype.addListener=function(a,b){return this.hasEvent(a)?this.hasListener(a,b)||this.__listeners[a].push(b):$log.error("Did not add event '{0}' because the current object only supports '{1}'",a,this.__events.join(", ")),this},Dispatcher.prototype.on=Dispatcher.prototype.addListener,Dispatcher.prototype.removeListener=function(a,b){if(this.hasEvent(a))if($type.isFunction(b)){for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return this.__listeners[a].splice(c,1),this}else this.__listeners[a]=[];return this},Dispatcher.prototype.off=Dispatcher.prototype.removeListener,Dispatcher.prototype.destroy=function(){for(var a in this.__listeners)this.off(a)},Dispatcher.prototype.fireEvent=function(a,b){var c=null,d=null;$type.instanceOf(a,$evt.Event)?(d=a.type,c=a):(null==b&&(b=this.createEventData()),d=a,c=new $evt.Event(this,d,b));var e=this.__listeners[d];if(null!=e&&0!=e.length){for(var f=0;f<e.length&&(!$type.isFunction(e[f])||(e[f](c),!c.cancel));f++);return c}return null},Dispatcher.prototype.fire=Dispatcher.prototype.fireEvent,Dispatcher.prototype.createEventData=function(a){return{}},Dispatcher.prototype.toString=function(){var a=[];for(var b in this.__listeners)this.__listeners.hasOwnProperty(b)&&a.push("{0}: {1} listeners".format(b,this.__listeners[b].length));return"Dispatcher: {{0}}".format(a.join(", "))};var $function=function(){var a=/^[\s\S$]*?function[\s\n]+(([\w.$]*)[\s\n]*\((.*)\))\W[\s\S]*$/,b={};return b.EMPTY=function(){},b.getName=function(b,c,d){if(0==arguments.length){if(b=arguments.callee.caller,!$type.isFunction(b))return null}else{if(null==b)return null;if(!$type.isFunction(b)&&(b=b.constructor,!$type.isFunction(b)))return null}var e=String(b).replace(a,function(){var a=arguments[2]?arguments[2]:"anonymous",b=arguments[2]?arguments[1]:[a,"(",arguments[3],")"].join($string.EMPTY);return c&&!d?b:c&&d?arguments[3]:a});return e.replace(/([\w\$])\$([\w\$])/g,"$1.$2")},b.callerName=function(){return b.getName(arguments.callee.caller.caller)},b.stackTrace=function(a,c){for(var d=a||arguments.callee.caller,e=[],f=[],g=0;!(null==d||c&&g>=c||f.contains(d));){for(var h=(b.getName(d),[]),i=d.arguments,j=0;j<i.length;j++)$type.isFunction(i[j])&&$type.isFunction(i[j].getName)?h.push(i[j].getName(!0)):$type.isArray(i[j])?h.push("array[{0}]".format(i[j].length)):$type.isObject(i[j])?h.push("object{..}"):$type.isNull(i[j])?h.push("null"):$type.isString(i[j])?h.push(i[j].length<200?'"{0}"'.format(i[j]):"[string({0})]".format(i[j].length)):void 0==i[j]?h.push("undefined"):h.push(i[j]);f.push(d),e.unshift(b.getName(d)+"("+h.join(", ")+")");try{d=d.caller}catch(k){break}g++}return e.toString=function(a){return this.join(a||"\n")},e},b.delay=function(a,b){a.id=setTimeout(b,a.delay)},b}(),$number=function(){function a(a,b,c){var d=0,e=Number.MAX_VALUE,f=!0;1==arguments.length&&($type.isBoolean(arguments[0])?f=!arguments[0]:$type.isNumber(arguments[0])&&(e=arguments[0])),2==arguments.length&&($type.isBoolean(arguments[1])?(e=parseInt(arguments[0])||0,f=!arguments[1]):$type.isNumber(arguments[1])&&(d=parseInt(arguments[0])||0,e=arguments[1])),3==arguments.length&&(d=parseInt(arguments[0])||0,e=parseInt(arguments[1])||0,f=!arguments[2]);var g=d+(e-d)*Math.random();return f?Math.round(g):g}return{random:a}}(),Property=Dispatcher.extend(function a(b){this.get=a.prototype.get,this.set=a.prototype.set,this["default"]=null,this.id=null,this.type=String,this.restrictTo=null,$.extend(this,b),this.value=this.value||this["default"]});Property.prototype.get=function(){return this._get.apply(this,arguments)},Property.prototype.set=function(a){this._set(a)},Property.prototype._get=function(){return this.value},Property.prototype._set=function(a){var b;switch(this.type){case Boolean:b=null!=String(a).match(/^true|1$/);break;case Number:b=parseFloat(a)||0;break;default:b=null==a?a:String(a)}var c=!0;if(null!=this.restrictTo)if($type.isArray(this.restrictTo))c=[].concat(this.restrictTo).indexOf(b)!=-1;else{c=!1;for(var d in this.restrictTo)if(this.restrictTo.hasOwnProperty(d)&&this.restrictTo[d]==b){c=!0;break}}c&&(this.value=b)},Property.prototype.valueOf=function(){return this.get()},Property.prototype.toString=function(){return String(this.get())},Prototype.extend=function(a){if(null==a||a==this||null==a.prototype)return a;var b=this,c=$type.isFunction(a)?a:a.constructor;a.prototype.__type={base:b.prototype,constructor:c};for(var d in b.prototype)a.prototype.hasOwnProperty(d)||(a.prototype[d]=b.prototype[d]);return a.extend=a.extend||Prototype.extend,a},Prototype.prototype.construct=function(){if(null!=this.__type){this.$this=this.$this||this;var a=this.$this.__type.base.constructor;this.$this=this.$this.__type.base,a.apply(this,$array.fromArguments(arguments)),delete this.$this}},Prototype.prototype.base=function(a){if(null==this.__type)return null;for(var b=null,c=this,d=arguments.callee.caller;c.__type&&!b;)c.__type.base[a]!=d&&(b=c.__type.base[a]),c=c.__type.base;return"function"==typeof b?b.apply(this,Array.prototype.slice.call(arguments,1)):null},Prototype.prototype.get=function(a){if(1==arguments.length&&this.hasOwnProperty(a))return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Prototype.prototype.set=function(a,b){2==arguments.length&&this.hasOwnProperty(a)&&($type.instanceOf(this[a],Property)?void 0!=b&&this[a].set(b):this[a]=b)},Prototype.extend(Settings),Settings.prototype.getValue=function(a,b,c,d,e){var f=b&&b.jquery?b[0]:b,g=c&&c.jquery?c[0]:c,h=a.toLowerCase(),i=d;if($type.isElement(g)?g.getAttribute("data-"+h)?i=g.getAttribute("data-"+h):g.getAttribute(h)&&(i=g.getAttribute(h)):g&&void 0!=g[h]?i=g[h]:$type.isElement(f)?f.getAttribute("data-"+h)?i=f.getAttribute("data-"+h):f.getAttribute(h)&&(i=f.getAttribute(h)):f&&void 0!=f[h]&&(i=f[h]),null!=e){var j=!1;for(var k in e)if(i==e[k]){j=!0;break}j||(i=d)}return i},Settings.prototype.getBoolean=function(a,b,c,d){var e=String(this.getValue(a,b,c,d)).toLowerCase();return"1"==e||"true"==e||"yes"==e},Settings.prototype.getNumber=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return $type.isNumeric(f)?parseFloat(f):0},Settings.prototype.getString=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return null==f?null:String(f)},Settings.prototype.getArray=function(a,b,c,d,e){var f=this.getString(a,b,c,d,e);if(null==f)return[];for(var g=f.split(/,/),h=[],i=0;i<g.length;i++)h.push(g[i].trim());return h},Settings.prototype.getFunction=function(a,b,c,d){var e=this.getValue(a,b,c,d);return one.type.isFunction(e)?e:null},Settings.prototype.setProperties=function(a,b){for(var c in this)if(this.hasOwnProperty(c)&&$type.instanceOf(this[c],Property)){var d=this.getValue(c,a,b,void 0);void 0!=d&&this[c].set(d)}},Settings.prototype.get=function(a){return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Settings.prototype.set=function(a,b){return void 0===this[a]?console.warn("Current settings don't contain a property with name '{0}'.".format(a)):($type.instanceOf(this[a],Property)?this[a].set(b):this[a]=b,this.get(a))};var $string=new function(){function a(a,c,d,e){for(var f=String(a),g=c-f.length,h=[];h.length<g;)h.push(d);return h=h.join(b.EMPTY),2==e?f+h:h+f}var b=this;b.EMPTY="";var c;this.format=function(d){var e=$array.fromArguments(arguments,1);return null==c&&(c=/\{(\d+)([$#])?(\d+)?([+-])?\}/g),String(d).replace(c,function(){try{var c=String(e[arguments[1]])}catch(d){c=b.EMPTY}if(arguments[2]!=b.EMPTY&&arguments[3]!=b.EMPTY){var f="+"==arguments[4]?2:1;c=a(c,arguments[3],"#"==arguments[2]?"0":" ",f)}return c})},this.isEmpty=function(a){return null==a||b.trim(a)==b.EMPTY},this.trim=function(a,b){null==b&&(b="\\s");var c=new RegExp("^["+b+"]*([\\s\\S]*?)["+b+"]*$");return String(a).replace(c,"$1")},this.padLeft=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d=c+d;return d},this.padRight=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d+=c;return d},this.repeat=function(a,c){for(var d=[],e=0;e<c;e++)d.push(a);return d.join(b.EMPTY)},this.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);return a.join(b.EMPTY)},this.substitute=function(a,b){return a&&b?a.replace(/\{([^}{]+)\}/g,function(a,c){return null!=b[c]?b[c]:a}):a},String.prototype.trim=function(a){return b.trim(this,a)},String.prototype.format=function(){return b.format(this,arguments)}},$type=new function b(){function b(){return arguments.length?typeof arguments[0]:null}return b.registerNamespace=function(a){for(var b=a.split("."),c=window,d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]={}),c=c[b[d]]},b.isArray=function(a,b){return null==a?b||!1:a.constructor==Array||a!=window&&!$type.isString(a)&&!$type.isFunction(a)&&$type.isNumber(a.length)||b||!1},b.isBoolean=function(a){return null!=a&&("boolean"==b(a)||a.constructor==Boolean)},b.isFunction=function(a,c){return null==a?c||!1:"function"==b(a)||a.constructor==Function||!$type.isString(a)&&Boolean(String(a).match(/\bfunction\b/))||c||!1},b.isNull=function(a){return null==a||void 0==a},b.isNumber=function(a,c){return null==a?c||!1:"number"==b(a)&&isFinite(a)||a.constructor==Number||c||!1},b.isNumeric=function(a){return!isNaN(parseFloat(a))},b.isDate=function(a,b){return null==a?b||!1:$type.isFunction(a.getDate)&&$type.isFunction(a.getTime)||b||!1},b.isObject=function(a,c){return null==a||void 0==a?c||!1:"object"==b(a)&&a.constructor!=String&&a.constructor!=Number||$type.isFunction(a)||c||!1},b.isString=function(a,c){return null==a?c||!1:"string"==b(a)||null!=a&&a.constructor==String||c||!1},b.isNode=function(a){return $type.isObject(a)&&$type.isNumber(a.nodeType)},b.isDocument=function(a){return $type.isNode(a)&&9==a.nodeType},b.isElement=function(a){return $type.isNode(a)&&1==a.nodeType},b.isHtmlElement=function(a){return $type.isElement(a)&&$type.isString(a.className)},b.instanceOf=function(a,b){if(!$type.isObject(a)||!$type.isFunction(b))return!1;if(a instanceof b)return!0;if(a.__type&&a.__type.constructor==b)return!0;if(a.__type&&null!=a.__type.base)for(var c=a;c=c.__type.base;)if(c.__type.constructor==b)return!0;return!1},b["implements"]=function(a,b){var c=!0;if(null==a||null==b)c=!1;else for(var d in b)if(b.hasOwnProperty(d)&&!$type.isFunction(a[d])){c=!1;break}return c},b.extend=function(a,b,c){if(c=c||!1,a&&b)for(var d in b)b.hasOwnProperty(d)&&(void 0==a[d]||c)&&(a[d]=b[d]);return a},b},$array=new function(){this.fromArguments=function(a,b,c){if(null==a)return[];$type.isArray(a)||(a=[a]),1==a.length&&$type.isArray(a[0])&&(a=a[0]),isNaN(parseInt(b))&&(b=0),isNaN(parseInt(c))&&(c=a.length-1);for(var d=[],e=b;e<=c;e++)d.push(a[e]);return 1==d.length&&$type.isArray(d[0])&&(d=d[0]),d},this.flatten=function(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if($type.isArray(c))for(var d=0;d<c.length;d++)$type.isArray(c[d])?a.push.apply(a,this.flatten(c[d])):a.push(c[d]);else a.push(c)}return a};var a={contains:function(a){return this.indexOf(a)>=0},indexOf:function(a,b){var c=isNaN(b)?0:b;if(c<0||c>this.length-1)return-1;for(var d=c;d<this.length;d++)if(this[d]==a)return d;return-1},lastIndexOf:function(a,b){var c=isNaN(b)?this.length-1:b;if(c<0||c>this.length-1)return-1;for(var d=c;d>=0;d--)if(this[d]==a)return d;return-1},every:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(!d)return!1}return!0},some:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++){var d=a.call(b,this[c],c,this);if(d)return!0}return!1},filter:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++){var e=a.call(b,this[d],d,this);e&&c.push(this[d])}return c},forEach:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");b=b||this;for(var c=0;c<this.length;c++)void 0!==this[c]&&a.call(b,this[c],c,this)},map:function(a,b){if("function"!=typeof a)throw new Error("The callback argument is not a function!");var c=[];b=b||this;for(var d=0;d<this.length;d++)void 0!==this[d]&&c.push(a.call(b,this[d],d,this));return c}};$type.extend(Array.prototype,a)},CookieProperty=Property.extend(function(a){this.construct(a),this.id=this.id||this.name;var b=one.cookie.get(this.id);null!=b&&(this.value=b)});CookieProperty.prototype._set=function(a){return one.cookie.set(this.id,a,null,null,this.path||null),console.log("cookie: "+this.id+"="+a),this.base("_set",a)};var $date=function(){function a(a,b){var c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=$type.isDate(b)?new Date(b):a?new Date(d):new Date(c);if(a)if(/^\d+$/.test(a))e=new Date(parseInt(a));else if(/^([+-])(\d+|\d*\.\d*)([smhdMy])$/.test(a)){var h=RegExp.$1,i=parseFloat(RegExp.$2),j=RegExp.$3,k=$string.concat("get",f[j]),l=$string.concat("set",f[j]),m=Date.prototype[k].apply(e),n="-"==h?m-i:m+i;Date.prototype[l].call(e,n)}else for(var o in g)g.hasOwnProperty(o)&&new function(){var b=g[o];a=a.replace(b.regexp,function(){return e=b.handler(e,arguments),$string.EMPTY})};return e}function b(a,b){return $type.isDate(a)?b?String(b).replace(/yyyy/g,a.getFullYear().toString()).replace(/yy/g,a.getFullYear().toString().substring(2,4)).replace(/MMMM/g,d[a.getMonth()]).replace(/MMM/g,d[a.getMonth()].substring(0,3)).replace(/MM/g,$string.padLeft(a.getMonth()+1,2,0)).replace(/M/g,(a.getMonth()+1).toString()).replace(/dd/g,$string.padLeft(a.getDate(),2,0)).replace(/d/g,a.getDate().toString()).replace(/hh/g,$string.padLeft(a.getHours(),2,0)).replace(/h/g,a.getHours().toString()).replace(/mm/g,$string.padLeft(a.getMinutes(),2,0)).replace(/m/g,a.getMinutes().toString()).replace(/ss/g,$string.padLeft(a.getSeconds(),2,0)).replace(/s/g,a.getSeconds().toString()).replace(/wwww/g,e[a.getDay()]).replace(/www/g,e[a.getDay()].substr(0,3)):h.apply(a):"NaN"}function c(a){return $type.isDate(a)?a:new Date}var d=["January","February","Match","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f={s:"Seconds",m:"Minutes",h:"Hours",d:"Date",M:"Month",y:"FullYear"},g={dayAndMonth1:{regexp:new RegExp("\\b(\\d{1,2})(-|/|\\.)(\\d{1,2})(?:\\2(\\d{2}))?\\b"),handler:function(a,b){var c=parseInt(b[1]),d=parseInt(b[3]),e=b[2];return d>12||"/"==e?(a.setDate(d),a.setMonth(c-1)):(a.setDate(c),a.setMonth(d-1)),isNaN(e)||a.setYear(Number(String((new Date).getFullYear()).substring(0,2)+String(e))),a}},dayAndMonth2:{regexp:new RegExp("(?:\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\s*)?\\b(jan|feb|mar|jun|jul|aug|sep|oct|nov|dec)(?:[a-z]+)?(?:(?:.|-)?\\s*\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\b)?","i"),handler:function(a,b){var c=b[2].toLowerCase(),d=$.inArray(c,"jan|feb|mar|jun|jul|aug|sep|oct|nov|dec".split("|"));a.setMonth(d);var e=parseInt(b[1]),f=parseInt(b[3]);return isNaN(e)||a.setDate(e),isNaN(f)||a.setDate(f),a}},time:{regexp:new RegExp("(?:\\b|T)\\b(\\dd{2}):(\\d{2}):(\\d{2})\\b"),handler:function(a,b){return a.setHours(parseInt(b[1])),a.setMinutes(parseInt(b[1])),a.setSeconds(parseInt(b[1])),a}},year:{regexp:new RegExp("\\b(\\d{4})(?:\\b|T)"),handler:function(a,b){return a.setYear(parseInt(b[1])),a}},today:{regexp:new RegExp("^today$"),handler:function(a){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}}},h=Date.prototype.toString;return Date.prototype.toString=function(a){return b(this,a)},a.format=b,a.year=function(a){return c(a).getFullYear()},a.month=function(a){return c(a).getMonth()},a.day=function i(a){return i(a).getDate()},a.weekday=function(a){return c(a).getDay()},a.hours=function(a){return c(a).getHours()},a.minutes=function(a){return c(a).getMinutes()},a.seconds=function(a){return c(a).getSeconds()},a.time=function(a){return c(a).getTime()},a}(),Dispatcher=Prototype.extend(function(){this.__events=[],this.__listeners={};for(var a=0;a<arguments.length;a++)this.registerEvent(arguments[a])});Dispatcher.prototype.registerEvent=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.hasEvent(b)||(this.__events.push(b),this.__listeners[b]=[])}},Dispatcher.prototype.hasEvent=function(a){return this.__events.contains(a)},Dispatcher.prototype.hasListener=function(a,b){if(this.hasEvent(a))for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return!0;return!1},Dispatcher.prototype.addListener=function(a,b){return this.hasEvent(a)?this.hasListener(a,b)||this.__listeners[a].push(b):$log.error("Did not add event '{0}' because the current object only supports '{1}'",a,this.__events.join(", ")),this},Dispatcher.prototype.on=Dispatcher.prototype.addListener,Dispatcher.prototype.removeListener=function(a,b){if(this.hasEvent(a))if($type.isFunction(b)){for(var c=0;c<this.__listeners[a].length;c++)if(this.__listeners[a][c]==b)return this.__listeners[a].splice(c,1),this}else this.__listeners[a]=[];return this},Dispatcher.prototype.off=Dispatcher.prototype.removeListener,Dispatcher.prototype.destroy=function(){for(var a in this.__listeners)this.off(a)},Dispatcher.prototype.fireEvent=function(a,b){var c=null,d=null;$type.instanceOf(a,$evt.Event)?(d=a.type,c=a):(null==b&&(b=this.createEventData()),d=a,c=new $evt.Event(this,d,b));var e=this.__listeners[d];if(null!=e&&0!=e.length){for(var f=0;f<e.length&&(!$type.isFunction(e[f])||(e[f](c),!c.cancel));f++);return c}return null},Dispatcher.prototype.fire=Dispatcher.prototype.fireEvent,Dispatcher.prototype.createEventData=function(a){return{}},Dispatcher.prototype.toString=function(){var a=[];for(var b in this.__listeners)this.__listeners.hasOwnProperty(b)&&a.push("{0}: {1} listeners".format(b,this.__listeners[b].length));return"Dispatcher: {{0}}".format(a.join(", "))};var $function=function(){var a=/^[\s\S$]*?function[\s\n]+(([\w.$]*)[\s\n]*\((.*)\))\W[\s\S]*$/,b={};return b.EMPTY=function(){},b.getName=function(b,c,d){if(0==arguments.length){if(b=arguments.callee.caller,!$type.isFunction(b))return null}else{if(null==b)return null;if(!$type.isFunction(b)&&(b=b.constructor,!$type.isFunction(b)))return null}var e=String(b).replace(a,function(){var a=arguments[2]?arguments[2]:"anonymous",b=arguments[2]?arguments[1]:[a,"(",arguments[3],")"].join($string.EMPTY);return c&&!d?b:c&&d?arguments[3]:a});return e.replace(/([\w\$])\$([\w\$])/g,"$1.$2")},b.callerName=function(){return b.getName(arguments.callee.caller.caller)},b.stackTrace=function(a,c){for(var d=a||arguments.callee.caller,e=[],f=[],g=0;!(null==d||c&&g>=c||f.contains(d));){for(var h=(b.getName(d),[]),i=d.arguments,j=0;j<i.length;j++)$type.isFunction(i[j])&&$type.isFunction(i[j].getName)?h.push(i[j].getName(!0)):$type.isArray(i[j])?h.push("array[{0}]".format(i[j].length)):$type.isObject(i[j])?h.push("object{..}"):$type.isNull(i[j])?h.push("null"):$type.isString(i[j])?h.push(i[j].length<200?'"{0}"'.format(i[j]):"[string({0})]".format(i[j].length)):void 0==i[j]?h.push("undefined"):h.push(i[j]);f.push(d),e.unshift(b.getName(d)+"("+h.join(", ")+")");try{d=d.caller}catch(k){break}g++}return e.toString=function(a){return this.join(a||"\n")},e},b.delay=function(a,b){a.id=setTimeout(b,a.delay)},b}(),$number=function(){function a(a,b,c){var d=0,e=Number.MAX_VALUE,f=!0;1==arguments.length&&($type.isBoolean(arguments[0])?f=!arguments[0]:$type.isNumber(arguments[0])&&(e=arguments[0])),2==arguments.length&&($type.isBoolean(arguments[1])?(e=parseInt(arguments[0])||0,f=!arguments[1]):$type.isNumber(arguments[1])&&(d=parseInt(arguments[0])||0,e=arguments[1])),3==arguments.length&&(d=parseInt(arguments[0])||0,e=parseInt(arguments[1])||0,f=!arguments[2]);var g=d+(e-d)*Math.random();return f?Math.round(g):g}return{random:a}}(),Property=Dispatcher.extend(function c(a){this.get=c.prototype.get,this.set=c.prototype.set,this["default"]=null,this.id=null,this.type=String,this.restrictTo=null,$.extend(this,a),this.value=this.value||this["default"]});Property.prototype.get=function(){return this._get.apply(this,arguments)},Property.prototype.set=function(a){this._set(a)},Property.prototype._get=function(){return this.value},Property.prototype._set=function(a){var b;switch(this.type){case Boolean:b=null!=String(a).match(/^true|1$/);break;case Number:b=parseFloat(a)||0;break;default:b=null==a?a:String(a)}var c=!0;if(null!=this.restrictTo)if($type.isArray(this.restrictTo))c=[].concat(this.restrictTo).indexOf(b)!=-1;else{c=!1;for(var d in this.restrictTo)if(this.restrictTo.hasOwnProperty(d)&&this.restrictTo[d]==b){c=!0;break}}c&&(this.value=b)},Property.prototype.valueOf=function(){return this.get()},Property.prototype.toString=function(){return String(this.get())},Prototype.extend=function(a){if(null==a||a==this||null==a.prototype)return a;var b=this,c=$type.isFunction(a)?a:a.constructor;a.prototype.__type={base:b.prototype,constructor:c};for(var d in b.prototype)a.prototype.hasOwnProperty(d)||(a.prototype[d]=b.prototype[d]);return a.extend=a.extend||Prototype.extend,a},Prototype.prototype.construct=function(){if(null!=this.__type){this.$this=this.$this||this;var a=this.$this.__type.base.constructor;this.$this=this.$this.__type.base,a.apply(this,$array.fromArguments(arguments)),delete this.$this}},Prototype.prototype.base=function(a){if(null==this.__type)return null;for(var b=null,c=this,d=arguments.callee.caller;c.__type&&!b;)c.__type.base[a]!=d&&(b=c.__type.base[a]),c=c.__type.base;return"function"==typeof b?b.apply(this,Array.prototype.slice.call(arguments,1)):null},Prototype.prototype.get=function(a){if(1==arguments.length&&this.hasOwnProperty(a))return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Prototype.prototype.set=function(a,b){2==arguments.length&&this.hasOwnProperty(a)&&($type.instanceOf(this[a],Property)?void 0!=b&&this[a].set(b):this[a]=b)},Prototype.extend(Settings),Settings.prototype.getValue=function(a,b,c,d,e){var f=b&&b.jquery?b[0]:b,g=c&&c.jquery?c[0]:c,h=a.toLowerCase(),i=d;if($type.isElement(g)?g.getAttribute("data-"+h)?i=g.getAttribute("data-"+h):g.getAttribute(h)&&(i=g.getAttribute(h)):g&&void 0!=g[h]?i=g[h]:$type.isElement(f)?f.getAttribute("data-"+h)?i=f.getAttribute("data-"+h):f.getAttribute(h)&&(i=f.getAttribute(h)):f&&void 0!=f[h]&&(i=f[h]),null!=e){var j=!1;for(var k in e)if(i==e[k]){j=!0;break}j||(i=d)}return i},Settings.prototype.getBoolean=function(a,b,c,d){var e=String(this.getValue(a,b,c,d)).toLowerCase();return"1"==e||"true"==e||"yes"==e},Settings.prototype.getNumber=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return $type.isNumeric(f)?parseFloat(f):0},Settings.prototype.getString=function(a,b,c,d,e){var f=this.getValue(a,b,c,d,e);return null==f?null:String(f)},Settings.prototype.getArray=function(a,b,c,d,e){var f=this.getString(a,b,c,d,e);if(null==f)return[];for(var g=f.split(/,/),h=[],i=0;i<g.length;i++)h.push(g[i].trim());return h},Settings.prototype.getFunction=function(a,b,c,d){var e=this.getValue(a,b,c,d);return one.type.isFunction(e)?e:null},Settings.prototype.setProperties=function(a,b){for(var c in this)if(this.hasOwnProperty(c)&&$type.instanceOf(this[c],Property)){var d=this.getValue(c,a,b,void 0);void 0!=d&&this[c].set(d)}},Settings.prototype.get=function(a){return $type.instanceOf(this[a],Property)?this[a].get():this[a]},Settings.prototype.set=function(a,b){return void 0===this[a]?console.warn("Current settings don't contain a property with name '{0}'.".format(a)):($type.instanceOf(this[a],Property)?this[a].set(b):this[a]=b,this.get(a))};var $string=new function(){function a(a,c,d,e){for(var f=String(a),g=c-f.length,h=[];h.length<g;)h.push(d);return h=h.join(b.EMPTY),2==e?f+h:h+f}var b=this;b.EMPTY="";var c;this.format=function(d){var e=$array.fromArguments(arguments,1);return null==c&&(c=/\{(\d+)([$#])?(\d+)?([+-])?\}/g),String(d).replace(c,function(){try{var c=String(e[arguments[1]])}catch(d){c=b.EMPTY}if(arguments[2]!=b.EMPTY&&arguments[3]!=b.EMPTY){var f="+"==arguments[4]?2:1;c=a(c,arguments[3],"#"==arguments[2]?"0":" ",f)}return c})},this.isEmpty=function(a){return null==a||b.trim(a)==b.EMPTY},this.trim=function(a,b){null==b&&(b="\\s");var c=new RegExp("^["+b+"]*([\\s\\S]*?)["+b+"]*$");return String(a).replace(c,"$1")},this.padLeft=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d=c+d;return d},this.padRight=function(a,b,c){void 0==c&&(c=" ");for(var d=String(a);d.length<b;)d+=c;return d},this.repeat=function(a,c){for(var d=[],e=0;e<c;e++)d.push(a);return d.join(b.EMPTY)},this.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);return a.join(b.EMPTY)},this.substitute=function(a,b){return a&&b?a.replace(/\{([^}{]+)\}/g,function(a,c){return null!=b[c]?b[c]:a}):a},String.prototype.trim=function(a){return b.trim(this,a)},String.prototype.format=function(){return b.format(this,arguments)}},$type=new function d(){function d(){return arguments.length?typeof arguments[0]:null}return d.registerNamespace=function(a){for(var b=a.split("."),c=window,d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]={}),c=c[b[d]]},d.isArray=function(a,b){return null==a?b||!1:a.constructor==Array||a!=window&&!$type.isString(a)&&!$type.isFunction(a)&&$type.isNumber(a.length)||b||!1},d.isBoolean=function(a){return null!=a&&("boolean"==d(a)||a.constructor==Boolean)},d.isFunction=function(a,b){return null==a?b||!1:"function"==d(a)||a.constructor==Function||!$type.isString(a)&&Boolean(String(a).match(/\bfunction\b/))||b||!1},d.isNull=function(a){return null==a||void 0==a},d.isNumber=function(a,b){return null==a?b||!1:"number"==d(a)&&isFinite(a)||a.constructor==Number||b||!1},d.isNumeric=function(a){return!isNaN(parseFloat(a))},d.isDate=function(a,b){return null==a?b||!1:$type.isFunction(a.getDate)&&$type.isFunction(a.getTime)||b||!1},d.isObject=function(a,b){return null==a||void 0==a?b||!1:"object"==d(a)&&a.constructor!=String&&a.constructor!=Number||$type.isFunction(a)||b||!1},
d.isString=function(a,b){return null==a?b||!1:"string"==d(a)||null!=a&&a.constructor==String||b||!1},d.isNode=function(a){return $type.isObject(a)&&$type.isNumber(a.nodeType)},d.isDocument=function(a){return $type.isNode(a)&&9==a.nodeType},d.isElement=function(a){return $type.isNode(a)&&1==a.nodeType},d.isHtmlElement=function(a){return $type.isElement(a)&&$type.isString(a.className)},d.instanceOf=function(a,b){if(!$type.isObject(a)||!$type.isFunction(b))return!1;if(a instanceof b)return!0;if(a.__type&&a.__type.constructor==b)return!0;if(a.__type&&null!=a.__type.base)for(var c=a;c=c.__type.base;)if(c.__type.constructor==b)return!0;return!1},d["implements"]=function(a,b){var c=!0;if(null==a||null==b)c=!1;else for(var d in b)if(b.hasOwnProperty(d)&&!$type.isFunction(a[d])){c=!1;break}return c},d.extend=function(a,b,c){if(c=c||!1,a&&b)for(var d in b)b.hasOwnProperty(d)&&(void 0==a[d]||c)&&(a[d]=b[d]);return a},d};