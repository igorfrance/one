var $date=function(){function a(a,b){var c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=$type.isDate(b)?new Date(b):a?new Date(d):new Date(c);if(a)if(/^\d+$/.test(a))e=new Date(parseInt(a));else if(/^([+-])(\d+|\d*\.\d*)([smhdMy])$/.test(a)){var h=RegExp.$1,i=parseFloat(RegExp.$2),j=RegExp.$3,k=$string.concat("get",f[j]),l=$string.concat("set",f[j]),m=Date.prototype[k].apply(e),n="-"==h?m-i:m+i;Date.prototype[l].call(e,n)}else for(var o in g)g.hasOwnProperty(o)&&new function(){var b=g[o];a=a.replace(b.regexp,function(){return e=b.handler(e,arguments),$string.EMPTY})};return e}function b(a,b){return $type.isDate(a)?b?String(b).replace(/yyyy/g,a.getFullYear().toString()).replace(/yy/g,a.getFullYear().toString().substring(2,4)).replace(/MMMM/g,d[a.getMonth()]).replace(/MMM/g,d[a.getMonth()].substring(0,3)).replace(/MM/g,$string.padLeft(a.getMonth()+1,2,0)).replace(/M/g,(a.getMonth()+1).toString()).replace(/dd/g,$string.padLeft(a.getDate(),2,0)).replace(/d/g,a.getDate().toString()).replace(/hh/g,$string.padLeft(a.getHours(),2,0)).replace(/h/g,a.getHours().toString()).replace(/mm/g,$string.padLeft(a.getMinutes(),2,0)).replace(/m/g,a.getMinutes().toString()).replace(/ss/g,$string.padLeft(a.getSeconds(),2,0)).replace(/s/g,a.getSeconds().toString()).replace(/wwww/g,e[a.getDay()]).replace(/www/g,e[a.getDay()].substr(0,3)):h.apply(a):"NaN"}function c(a){return $type.isDate(a)?a:new Date}var d=["January","February","Match","April","May","June","July","August","September","October","November","December"],e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f={s:"Seconds",m:"Minutes",h:"Hours",d:"Date",M:"Month",y:"FullYear"},g={dayAndMonth1:{regexp:new RegExp("\\b(\\d{1,2})(-|/|\\.)(\\d{1,2})(?:\\2(\\d{2}))?\\b"),handler:function(a,b){var c=parseInt(b[1]),d=parseInt(b[3]),e=b[2];return d>12||"/"==e?(a.setDate(d),a.setMonth(c-1)):(a.setDate(c),a.setMonth(d-1)),isNaN(e)||a.setYear(Number(String((new Date).getFullYear()).substring(0,2)+String(e))),a}},dayAndMonth2:{regexp:new RegExp("(?:\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\s*)?\\b(jan|feb|mar|jun|jul|aug|sep|oct|nov|dec)(?:[a-z]+)?(?:(?:.|-)?\\s*\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\b)?","i"),handler:function(a,b){var c=b[2].toLowerCase(),d=$.inArray(c,"jan|feb|mar|jun|jul|aug|sep|oct|nov|dec".split("|"));a.setMonth(d);var e=parseInt(b[1]),f=parseInt(b[3]);return isNaN(e)||a.setDate(e),isNaN(f)||a.setDate(f),a}},time:{regexp:new RegExp("(?:\\b|T)\\b(\\dd{2}):(\\d{2}):(\\d{2})\\b"),handler:function(a,b){return a.setHours(parseInt(b[1])),a.setMinutes(parseInt(b[1])),a.setSeconds(parseInt(b[1])),a}},year:{regexp:new RegExp("\\b(\\d{4})(?:\\b|T)"),handler:function(a,b){return a.setYear(parseInt(b[1])),a}},today:{regexp:new RegExp("^today$"),handler:function(a){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}}},h=Date.prototype.toString;return Date.prototype.toString=function(a){return b(this,a)},a.format=b,a.year=function(a){return c(a).getFullYear()},a.month=function(a){return c(a).getMonth()},a.day=function i(a){return i(a).getDate()},a.weekday=function(a){return c(a).getDay()},a.hours=function(a){return c(a).getHours()},a.minutes=function(a){return c(a).getMinutes()},a.seconds=function(a){return c(a).getSeconds()},a.time=function(a){return c(a).getTime()},a}();