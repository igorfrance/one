one.controls.scroller=function a(){function b(){this.enabled?(this.$element.toggleClass("one-hscrollable",this.isScrollableHorizontally()),this.$element.toggleClass("one-vscrollable",this.isScrollableVertically())):this.$element.removeClass("one-hscrollable one-vscrollable")}function c(){this.$trackVertical.toggle()}function d(a){var b,c,d=one.HtmlControl.PROPS[a],e=a==z.HORIZONTAL?this.$trackHorizontal:this.$trackVertical,f=a==z.HORIZONTAL?this.$gripHorizontal:this.$gripVertical;a==z.HORIZONTAL?(b=parseInt(this.$gripVertical.css("top"))||0,c=parseInt(this.$gripVertical.css("bottom"))||0):(b=parseInt(this.$gripVertical.css("left"))||0,c=parseInt(this.$gripVertical.css("right"))||0);var g=this[d.scrollSize](),h=this.$element[d.size](),i=e[d.size](),j=f[d.size]();if(g>h){var k=parseInt(e.css(d.scrollPaddingSize));this.$content.css(d.scrollPadding,this.$content.data("_"+d.scrollPadding)+k),g=this[d.scrollSize]();var l=i-(b+c);this.scrollRatio[a]=l/g,j=Math.round(h*this.scrollRatio[a]),f.css(d.size,j),f.data("minScroll",b),f.data("maxScroll",i-j-c)}else this.$content.css(d.scrollPadding,this.$content.data("_"+d.scrollPadding))}function e(){var a=this.$scrollGrip,b=a.data("orientation"),c=one.HtmlControl.PROPS[b],d=a.position()[c.position],e=Math.round(d/this.scrollRatio[b]);this.$scroller.prop(c.scrollPos,e)}function f(){var a=this.$scroller.prop("scrollTop"),b=this.$scroller.prop("scrollLeft"),c=Math.round(a*this.scrollRatio[z.VERTICAL]),d=Math.round(b*this.scrollRatio[z.HORIZONTAL]);this.$gripVertical.css("top",Math.min(Math.max(this.$gripVertical.data("minScroll"),c),this.$gripVertical.data("maxScroll"))),this.$gripHorizontal.css("left",Math.min(Math.max(this.$gripHorizontal.data("minScroll"),d),this.$gripHorizontal.data("maxScroll")))}function g(a,b){j.call(this,a),this.$element.addClass(A[a]),b&&i.call(this,a,!0)}function h(a){this.$element.removeClass(A[a])}function i(a){j.call(this,a),this.switches[a].id=setTimeout($.proxy(h,this,a),this.switches[a].duration)}function j(a){this.switches[a]&&clearTimeout(this.switches[a].id)}function k(a){var b=$(a.currentTarget),c=b.closest(".one-scrolltrack");one.drag.on("move",this.onDragMove),one.drag.on("stop",this.onDragEnd);var d=b.data("orientation")==z.VERTICAL,e={moveX:!d,moveY:d,minX:this.$gripHorizontal.data("minScroll"),maxX:this.$gripHorizontal.data("maxScroll"),minY:this.$gripVertical.data("minScroll"),maxY:this.$gripVertical.data("maxScroll")};return one.drag.start(a,a.currentTarget,e),this.fireEvent("dragstart"),c.addClass("active"),this.$scrollGrip=b,this.scrollOrientation=d?z.VERTICAL:z.HORIZONTAL,!1}function l(){e.call(this)}function m(){one.drag.off("move",this.onDragMove),one.drag.off("stop",this.onDragEnd);var a=this.$scrollGrip.closest(".one-scrolltrack");a.removeClass("active"),this.scrollOrientation=null,this.fireEvent("dragend"),this.$trackVertical.removeClass("active")}function n(){g.call(this,"ENGAGED",!0),f.call(this),this.fireEvent("scroll")}function o(a){a.stopPropagation()}function p(a){a.stopPropagation()}function q(a){var b=$(a.currentTarget),c=b.find(".one-scrollgrip"),d=one.HtmlControl.PROPS[c.data("orientation")],e=parseInt(c.css(d.position)),f=parseInt(e+c[d.size]()),g=a[d.offsetPos];if(e>g||g>f){var h=this.$scroller[d.size](),i=this.$scroller.prop(d.scrollPos);e>g?(console.log("Moving from click to: "+(i-h)),this.$scroller.prop(d.scrollPos,i-h)):(console.log("Moving from click to: "+(i+h)),this.$scroller.prop(d.scrollPos,i+h))}}function r(a){one.event.isMouseInRange(a,this.$element)&&(this.mouseInRange||(g.call(this,"HOVER"),this.mouseInRange=!0,s.call(this,a))),one.event.isMouseInRange(a,this.$element)||this.mouseInRange&&(h.call(this,"HOVER"),this.mouseInRange=!1,t.call(this,a))}function s(a){if(this.isScrollable()&&this.enabled){g.call(this,"HOT",!0),a.stopPropagation(),b.call(this);for(var d=this.$element.parent();0!=d.length;){var e=d.data("scroller");null!=e&&c.call(this),d=d.parent()}}}function t(a){if(this.isScrollable()&&this.enabled){h.call(this,"HOT");for(var b=this.$element.parent();0!=b.length;){var d=b.data("scroller");null!=d&&c.call(this),b=b.parent()}}}function u(a){if(!this.enabled||!this.isScrollable())return!0;if(this.isScrollableVertically()||a.shiftKey)return!0;var b=this.$scroller.wheelDelta(a),c=this.scrollLeft();this.scrollLeft(c-30*b.deltaY)}function v(){var a=$("<div style='position: absolute; top:-1000px; left:-1000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");return{width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight}}var w={},x={FIXED:0,PROPORTIONAL:1},y=null,z={VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL"},A={HOVER:"hover",HOT:"hot",ENGAGED:"engaged"},B=one.Settings.extend(function(a,b){var c=this.getString("sizing",a,b,"").toLowerCase();this.sizing="fixed"==c?x.FIXED:x.PROPORTIONAL,this.animate=this.getBoolean("animate",a,b,!0)}),a=one.HtmlControl.extend(function(a,b){this.construct(a,"scroll","dragstart","dragend"),this.settings=new B(a,b),this.mouseInRange=!1,null==y&&(y=v()),0==this.$element.find("> .one-scroller").length&&this.$element.html(one.string.format("<div class='one-scroller'><div class='one-scrollcontent'>{0}</div></div><div class='one-scrolltrack vertical'><div class='one-scrollgrip'/></div><div class='one-scrolltrack horizontal'><div class='one-scrollgrip'/></div>",this.$element.html())),this.$scroller=this.$element.find("> .one-scroller"),this.$content=this.$scroller.find("> .one-scrollcontent"),this.$trackVertical=this.$element.find("> .one-scrolltrack.vertical"),this.$gripVertical=this.$trackVertical.find("> .one-scrollgrip"),this.$trackHorizontal=this.$element.find("> .one-scrolltrack.horizontal"),this.$gripHorizontal=this.$trackHorizontal.find("> .one-scrollgrip"),this.$content.css("padding",this.$element.css("padding")),this.$content.data("_paddingRight",parseInt(this.$content.css("paddingRight"))||0),this.$content.data("_paddingBottom",parseInt(this.$content.css("paddingBottom"))||0),this.$scroller.css({right:-y.width,bottom:-y.height}),this.scrollRatio={},this.$scroller.on("scroll",$.proxy(n,this)),this.onDragMove=$.proxy(l,this),this.onDragEnd=$.proxy(m,this),this.offsetVertical=parseInt(this.$gripVertical.css("top"))||0,this.offsetHorizontal=parseInt(this.$gripHorizontal.css("left"))||0,this.scrollOrientation=null,this.enabled=!0,this.overflow=this.$scroller.css("overflow"),this.switches={HOVER:{id:0,duration:2e3},ENGAGED:{id:0,duration:500},HOT:{id:0,duration:1500}},one.dom.isTouchDevice()||$(document).on("mousemove",$.proxy(r,this)),this.$gripVertical.data("orientation",z.VERTICAL).on("mousedown",$.proxy(k,this)).on("click",one.event.cancel),this.$gripHorizontal.data("orientation",z.HORIZONTAL).on("mousedown",$.proxy(k,this)).on("click",one.event.cancel),this.$trackVertical.on("mouseenter",$.proxy(o,this)).on("mouseleave",$.proxy(p,this)).on("click",$.proxy(q,this)),this.$trackHorizontal.on("mouseenter",$.proxy(o,this)).on("mouseleave",$.proxy(p,this)).on("click",$.proxy(q,this)),this.$scroller.on("mousewheel DOMMouseScroll",$.proxy(u,this)),this.$element.data("scroller",this),this.redraw()});return a.prototype.enable=function(){this.enabled=!0,this.redraw(),this.isScrollable()&&(this.$scroller.css("overflow",one.string.EMPTY),this.$trackVertical.show())},a.prototype.disable=function(){this.enabled=!1,this.$trackVertical.hide(),this.$scroller.css("overflow","hidden")},a.prototype.isScrollable=function(){return this.isScrollableVertically()||this.isScrollableHorizontally()},a.prototype.isScrollableVertically=function(){var a=this.$scroller.prop("scrollHeight"),b=this.$scroller.outerHeight();return a>b},a.prototype.isScrollableHorizontally=function(){var a=this.$scroller.prop("scrollWidth"),b=this.$scroller.outerWidth();return a>b},a.prototype.scrollLeft=function(a){return!isNaN(a)&&a>=0&&this.$scroller.prop("scrollLeft",a),this.$scroller.prop("scrollLeft")},a.prototype.scrollTop=function(a){return!isNaN(a)&&a>=0&&this.$scroller.prop("scrollTop",a),this.$scroller.prop("scrollTop")},a.prototype.scrollHeight=function(a){return!isNaN(a)&&a>0&&(this.$content.css("height",a),this.redraw()),this.$content.prop("scrollHeight")},a.prototype.scrollWidth=function(a){return!isNaN(a)&&a>0&&(this.$content.css("width",a),this.redraw()),this.$content.prop("scrollWidth")},a.prototype.scrollMaxLeft=function(){return this.scrollWidth()-this.$content.width()},a.prototype.scrollMaxTop=function(){return this.scrollHeight()-this.$content.height()},a.prototype.scrollLeft=function(a){return this.enabled&&!isNaN(a)&&this.$scroller.prop("scrollLeft",a),this.$scroller.prop("scrollLeft")},a.prototype.scrollTop=function(a){return this.enabled&&!isNaN(a)&&this.$scroller.prop("scrollTop",a),this.$scroller.prop("scrollTop")},a.prototype.redraw=function(){d.call(this,z.VERTICAL),d.call(this,z.HORIZONTAL),b.call(this)},w.create=function(b,c){if(null==b||0==b.length)return one.log.error("Specify the elements to initialize by using the expression argument");var d=[];return $(b).each(function(b,e){var f=$(e).data("scroller")||new a(e,c);d.push(f)}),d.length>1?d:d[0]},$.fn.scroller=function(a){return this.each(function(b,c){w.create(c,a)})},w}(),one.controls.slider=function(){function a(a,b){return b?0==b.indexOf("this::")?a.find(b.replace(/^this::/,one.string.EMPTY)):$(b):null}function b(a){if(a.$element.is(":visible")){var b=a.$element[a.props.size](),c=a.$handle[a.props.outerSize]();a.minPos=0,a.maxPos=b-c;var d=a.settings.minValue,e=a.settings.maxValue,f=e-d;0>d&&e>0&&(f=e+Math.abs(d)),a.ratio=f/a.maxPos,a.range=f,a.ready||(a.value(a._value),a.ready=!0)}}function c(a){one.drag.on("move",this.onDragMove),one.drag.on("stop",this.onDragEnd);var b={moveX:this.settings.orientation==i.HORIZONTAL,moveY:this.settings.orientation==i.VERTICAL,minX:this.minPos,maxX:this.maxPos,minY:this.minPos,maxY:this.maxPos};return one.drag.start(a,this.$handle,b),!1}function d(){g(this),this.fireEvent("change")}function e(){one.drag.off("move",this.onDragMove),one.drag.off("stop",this.onDragEnd)}function f(){b(this)}function g(a){if(a.$text||a.$control){var b=a.value();a.$text&&a.$text.text(b),a.$control&&a.$control.val(b)}}var h={},i={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},j={NORMAL:0,INVERTED:1},k=one.Settings.extend(function(a,b){this.orientation=$(a).hasClass("vertical")?i.VERTICAL:i.HORIZONTAL,this.layout=this.orientation==i.VERTICAL?j.INVERTED:j.NORMAL,this.roundValues=this.getBoolean("roundValues",a,b,!0),this.minValue=this.getNumber("minValue",a,b,0),this.maxValue=this.getNumber("maxValue",a,b,100),this.value=this.getNumber("value",a,b),this.defaultValue=this.getNumber("defaultValue",a,b,this.minValue),this.textElement=this.getString("textElement",a,b,one.string.EMPTY).trim(),this.controlElement=this.getString("controlElement",a,b,one.string.EMPTY).trim(),this.maxValue<this.minValue&&(this.maxValue=this.minValue)}),l=one.HtmlControl.extend(function(g,h){this.construct(g,"change","reset"),this.settings=new k(g,h),this.props=one.HtmlControl.PROPS[this.settings.orientation],this.ready=!1,this.$handle=$("<div class='handle'/>"),this.$element.html(one.string.EMPTY),this.$element.append(this.$handle),this.$text=a(this.$element,this.settings.textElement),this.$control=a(this.$element,this.settings.controlElement),this.$handle.on("mousedown",$.proxy(c,this)),this.$handle.on("dblclick",$.proxy(this.reset,this)),this.onDragMove=$.proxy(d,this),this.onDragEnd=$.proxy(e,this),$(window).on("resize",$.proxy(f,this)),this.minPos=0,this.maxPos=0,this.ratio=0,b(this),this.$element.data("slider",this)});return l.prototype.reset=function(){this.value(this.settings.defaultValue)},l.prototype.value=function(a){if(!this.$element.is(":visible"))return a&&(this._value=a),null!=this._value?this._value:this.initValue;var b=parseFloat(this.$handle.css(this.props.position)),c=this.settings.layout==j.INVERTED?this.settings.minValue+(this.maxPos-b)*this.ratio:this.settings.minValue+b*this.ratio;if(one.type.isNumeric(a)){var d=Math.max(Math.min(parseFloat(a),this.settings.maxValue),this.settings.minValue),e=d!=this._value;if(this._value=d,this._value!=c){var f=this._value-this.settings.minValue;b=f/this.ratio,this.settings.layout==j.INVERTED&&(b=this.maxPos-b),this.$handle.css(this.props.position,b)}g(this),e&&this.fireEvent("change")}else this._value=c;return this.settings.roundValues&&(this._value=Math.round(this._value)),this._value},h.create=function(a,b){if(null==a||0==a.length)return one.log.error("Specify the elements to initialize by using the expression argument");var c=[];return $(a).each(function(a,d){var e=$(d).data("slider")||new l(d,b);c.push(e)}),c.length>1?c:c[0]},$.fn.slider=function(a){return this.each(function(b,c){h.create(c,a)})},h}(),one.controls.flexstrip=function(){function a(a,b){if(0>a){if(this.autoIndex==this.$slides.length-1)return this.autoIndex;if(this.settings.alwaysMove)return Math.min(this.selectedIndex+1,this.autoIndex+1)}if(a>0){if(0==this.autoIndex)return this.autoIndex;if(this.settings.alwaysMove)return Math.max(this.selectedIndex-1,this.autoIndex-1)}for(var c,d=Number.POSITIVE_INFINITY,e=-1,f=parseInt(this.$element.css(this.props.position))||0,g=0;g<this.$slides.length;g++){var h=this.snapCoords[g],i=Math.abs(f+h);d>i&&(d=i,e=g,c=i/(.01*this.$slides.eq(g)[this.props.size]()))}var j=!1;return b&&(j=c>=30&&Math.abs(a)<=3||15>=c&&Math.abs(a)<=4.5),j||this.settings.oneAtATime||(a>0&&e>=this.autoIndex&&(e=this.autoIndex-1),0>a&&e<=this.autoIndex&&(e=this.autoIndex+1)),e}function b(){for(var a,b=[],c=0,d=parseInt(this.$element.css(this.props.paddingStart)),e=0;e<this.$slides.length;e++){var f=this.$slides.eq(e),g=f.prop(this.props.offsetPos),h=parseInt(f.css(this.props.marginStart))||0,i=f.width();a=g-(d+h),b.push(a),c=a+i}if(c<this.stripLength)for(var j=this.stripLength-c,k=Math.ceil(j/this.containerLength),l=this.stripLength-this.containerLength,e=0;k>e;e++){var m=c+e*k;b.push(Math.max(m,l))}return b}function c(a){for(var b=Number.MAX_VALUE,c=0;c<this.snapCoords.length;c++){var d=-this.snapCoords[c];Math.abs(d-a)<b-a&&(b=d)}return b}function d(a){var b={top:parseInt(this.$element.css("top"))||0,left:parseInt(this.$element.css("left"))||0};return b.right=b.left+this.$element.width(),b.bottom=b.top+this.$element.height(),a?b[a]:b}function e(a){var b=this[this.props.minPos],c=this[this.props.maxPos];return Math.min(Math.max(a,b),c)}function f(a){var b,c=a.originalEvent||a,d=c.detail,e=c.wheelDelta,f=225,g=f-1;return d=d?e&&(b=e/d)?d/b:-d/.15:e/120,d=1>d?-1>d?(-Math.pow(d,2)-g)/f:d:(Math.pow(d,2)+g)/f,Math.min(Math.max(d/2,-1),1)}function g(){var a=parseInt(this.$element.css(this.props.position));this.wasThrown=a>=this[this.props.minPos]&&a<=this[this.props.maxPos];var b=a+8*this.accel,d=c.call(this,b),f=Math.abs(d-b);if(b=this.settings.snapToItems&&f<=this.settings.snapDistance?d:e.call(this,b),this.targetPos=b,a==this.targetPos)return void q.call(this);var g={};g[this.props.position]=this.targetPos;var h=this;this.animationOn=!0,this.$element.stop().animate(g,$.extend({},this.animSettings,{complete:function(){h.animationOn=!1,h.animSettings.complete.apply(h,arguments)}}))}function h(a,b,c){var d={},f=-this.snapCoords[a];this.settings.mode==F.FREE&&(f=e.call(this,f)),d[this.props.position]=f,this.autoIndex=a,this.selectedIndex=a,this.$element.stop();var g=parseInt(this.$element.css(this.props.position)),h=c!==!0&&this.scrollable&&g!=f;if(h){var i=this;this.animationOn=!0,this.$element.animate(d,$.extend({},this.animSettings,{complete:function(){i.animationOn=!1,i.animSettings.complete.apply(i,arguments)}}))}if(this.$slides.removeClass("selected").eq(this.selectedIndex).addClass("selected"),0!=b){var j=one.event.create(this,"select",{index:this.selectedIndex,$element:this.$slides.eq(a)});return this.fireEvent(j)}}function i(a){var b=this.slideIndex(),c=0==b?0:b-1;h.call(this,c,a)}function j(a){var b=this.slideIndex(),c=b==this.$slides.length-1?b:b+1;h.call(this,c,a)}function k(a){if(!this.isTouchDevice&&this.settings.arrowsOnHover)if(a||!this.mouseWithinRange)this.$arrowBack.removeClass("visible"),this.$arrowNext.removeClass("visible");else{var b=d.call(this)[this.props.position];this.$arrowBack.toggleClass("visible",b<this.maxX),this.$arrowNext.toggleClass("visible",b>this.minX)}}function l(a,b){a=a.originalEvent||a;var c=this.$container.offset(),d={eventX:a.pageX||a.clientX||0,eventY:a.pageY||a.clientY||0};return a.touches&&a.touches.length&&(d.eventX=a.touches[0].clientX,d.eventY=a.touches[0].clientY,d.touches=a.touches),d.mouseX=d.eventX-c.left,d.mouseY=d.eventY-c.top,d.inRange=d.mouseX>=this.minMouseX&&d.mouseX<=this.maxMouseX&&d.mouseY>=this.minMouseY&&d.mouseY<=this.maxMouseY,d}function m(){var a=this.$element.position()[this.props.position];if(a<this[this.props.minPos]||a>this[this.props.maxPos]){this.wasCancelled=!0;var b={};b[this.props.position]=a<this[this.props.minPos]?this[this.props.minPos]:this[this.props.maxPos],this.targetPos=b[this.props.position],this.$element.stop().animate(b,$.extend({},this.animSettings,{duration:this.settings.animDuration/2}))}}function n(){if(!this.settings.snapToItems)return!1;var a=this.$element.position()[this.props.position],b=c.call(this,a);if(Math.abs(b-a)<=this.settings.snapDistance){null!=this.move&&(this.move.kill(),this.move=null),this.wasCancelled=!0;var d={};return d[this.props.position]=b,this.targetPos=b,this.$element.animate(d,$.extend({},this.animSettings,{duration:this.settings.animDuration/2})),!0}return!1}function o(){this.animEngaged=!0}function p(b,c){c&&(c.end=this.targetPos);var d=parseInt(this.$element.css(this.props.position));if(this.autoIndex=a.call(this,0),this.fireEvent("move",{atStart:d==this[this.props.maxPos],atEnd:d==this[this.props.minPos]}),!this.wasCancelled&&(this.wasThrown||this.wasScrolled)){var e=n.call(this);e||m.call(this)}}function q(){this.targetDir=0,this.animEngaged=!1,this.wasThrown=!1,this.wasScrolled=!1,this.wasCancelled=!1;var a=parseInt(this.$element.css(this.props.position));this.fireEvent("stop",{position:a,atStart:a==this[this.props.maxPos],atEnd:a==this[this.props.minPos]}),k.call(this)}function r(a){if(!this.enabled||this.dragMode||this.scrollMode)return!0;var b=this.$container[this.props.outerSize]();if(0==b)return!0;var c=l.call(this,a);if(this.mouseWithinRange=this.stripLength>b&&c.inRange,this.mouseWithinRange&&this.settings.autoScroll){var d=this.settings.vertical?c.mouseY:c.mouseX,e=Math.round(-(d*this.ratio)+this.settings.extraLength),f=parseInt(this.$element.css(this.props.position)),g=Math.abs(f-e)>this.settings.minDiffMove;if(this.targetPos=e,this.settings.useAnimations&&g&&!this.animEngaged){var h={};h[this.props.position]=e,this.$element.stop().animate(h,this.animSettings)}this.settings.useAnimations&&this.animEngaged||this.$element.css(this.props.position,e)}return k.call(this),!0}function s(a){return i.call(this),a.stopPropagation(),!1}function t(a){return j.call(this),a.stopPropagation(),!1}function u(a){if(!this.enabled||this.dragMode||this.scrollMode)return!0;if("mouseup"==a.type&&1!=a.which)return!0;for(var b=$(a.target);!b.parent().is(this.$element);)if(b=b.parent(),0==b.length)return!0;var c=this.$slides.index(b);if(c==this.selectedIndex)return!0;var d=!(this.scrollable&&this.settings.scrollOnClick),e=h.call(this,c,!0,d),f=e&&1==e.cancel;return this.linkTarget&&!f&&this.linkTarget.click(),f}function v(){return!this.dragMode&&!this.scrollMode}function w(a){if(!this.settings.mouseScrollable||!this.mouseWithinRange||this.transitioning||!this.scrollable)return!0;var b=a.originalEvent||a,c=-b.wheelDelta||b.detail,g=d.call(this,this.props.position);if(c>0&&g==this[this.props.minPos])return!1;if(0>c&&g==this[this.props.maxPos])return!1;if(this.settings.snapToItems)c>0?j.call(this,!0):0>c&&i.call(this,!0);else{var h=null!=b.wheelDelta,k=f(a);this.accel=h?4*k:c;var l=h?e.call(this,g+k*this.scrollMoveSize):e.call(this,g-c*(this.scrollMoveSize/25));if(this.animEngaged&&0!=this.targetDir&&(-1==this.targetDir&&l<this.targetPos&&(l=this.targetPos),1==this.targetDir&&l>this.targetPos&&(l=this.targetPos)),this.targetPos=l,this.targetDir=c>0?1:-1,this.wheelAccellerationOn){this.wheelAnimActive&&(1!=this.wheelMultiplier&&this.wheelDirection!=this.targetDir&&(this.wheelMultiplier=1),this.wheelMultiplier+=.05,this.wheelDirection=this.targetDir);var m=this.targetPos*this.wheelMultiplier-this.targetPos;this.targetPos=e.call(this,this.targetPos+this.targetDir*m)}var n={};n[this.props.position]=this.targetPos;var o=this;this.wasScrolled=!0,this.wheelAnimActive=!0,this.$element.stop().animate(n,$.extend({},this.animSettings,{complete:function(){o.wheelAnimActive=!1,o.wheelMultiplier=1,o.animSettings.complete.apply(this,arguments)}}))}return one.event.cancel(a),!1}function x(a){this.redraw(!0)}function y(a){if(!this.enabled)return!0;if(a.target.tagName.match(/^textarea|select$/i))return!0;if("INPUT"==a.target.tagName&&!a.target.type.match(/^checkbox|radio|button|submit|reset$/i))return!0;if(this.settings.globalKeyReact||this.mouseWithinRange){if(this.settings.vertical){if(a.keyCode==one["const"].Key.UP)return i.call(this),!1;if(a.keyCode==one["const"].Key.DOWN)return j.call(this),!1}else{if(a.keyCode==one["const"].Key.LEFT)return i.call(this),!1;if(a.keyCode==one["const"].Key.RIGHT)return j.call(this),!1}return!0}}function z(a){if(!this.enabled)return!0;if(this.linkTarget=null,!this.settings.mouseDraggable||!this.scrollable)return!0;if("mousedown"==a.type&&1!=a.which)return!0;if(this.stripLength<=this.containerLength)return!0;var b=l.call(this,a);return b.touches&&1!=b.touches.length?!0:(this.animEngaged&&this.$element.stop(),this.dragMode=!1,this.engaged=!1,this.scrollMode=!1,this.startPos=d.call(this,this.props.position),this.startScrollX=this.$scrollThrough.scrollLeft(),this.startScrollY=this.$scrollThrough.scrollTop(),this.startEventX=b.eventX,this.startEventY=b.eventY,this.startEventPos=b[this.props.eventPos],document.addEventListener(one.dom.mouseUpEvent(),this.proxy.dragEnd,!0),document.addEventListener(one.dom.mouseMoveEvent(),this.proxy.dragMove,!0),"touchstart"==a.type&&"A"==a.target.tagName&&(this.linkTarget=a.target),this.$element.addClass("mousedown"),this.fireEvent("dragstart"),this.settings.stopPropagation&&(a.originalEvent.stopPropagation(),a.preventDefault()),one.dom.isTouchDevice())}function A(b){if(!this.enabled)return!0;var e=l.call(this,b,!0);if(this.settings.dropOnMouseOut&&!e.inRange)return B.call(this,b),!0;null!=this.move&&(this.move.kill(),this.move=null);var f=e.eventX,g=e.eventY,h=f-this.startEventX,i=g-this.startEventY,j=this.settings.vertical?i:h,k=this.settings.vertical?h:i;if(!this.scrollMode&&this.$scrollThrough.length&&(this.scrollMode=Math.abs(k)>=this.settings.minDiffMove),this.scrollMode){var m=this.settings.vertical?this.startScrollX:this.startScrollY,n=this.settings.vertical?"scrollLeft":"scrollTop";this.$scrollThrough[n](m-k)}var o=this[this.props.minPos],p=this[this.props.maxPos],q=this.startPos+j;if(q>p){var r=q-p,s=Math.max(0,1-r/(2*this.containerLength));j=Math.round(j*s),q=Math.round(this.startPos+j)}else o>q&&(r=o-q,s=Math.max(.5,1-r/(2*this.containerLength)),j=Math.round(j*s),q=Math.round(this.startPos+j));if(this.settings.snapToItems&&this.settings.snapWhileDragging){var t=c.call(this,q);Math.abs(t-q)<=this.settings.snapDistance&&(q=t)}var u=d.call(this,this.props.position);this.$element.css(this.props.position,q);var v=d.call(this,this.props.position);return v-u!=0&&(this.engaged=!0),this.accel=1.5*(v-u),0!=this.accel&&(this.dragMode=!0),this.autoIndex=a.call(this,0),this.fireEvent("move"),one.event.cancel(b)}function B(b){if(!this.enabled)return!0;if(this.dragMode)if(this.settings.snapToItems){var c=a.call(this,this.accel,!0);h.call(this,c,!0)}else g.call(this);document.removeEventListener(one.dom.mouseUpEvent(),this.proxy.dragEnd,!0),document.removeEventListener(one.dom.mouseMoveEvent(),this.proxy.dragMove,!0),this.engaged=!1;var d=this;setTimeout(function(){d.dragMode=!1},1),this.$element.removeClass("mousedown"),this.fireEvent("dragend")}function C(a){return this.enabled&&this.settings.mouseDraggable&&this.dragMode?one.event.cancel(a):!0}var D=30,E=400,F={FREE:"free",SLIDE:"slide",PAGE:"page"},G={CONTAIN:"contain",LARGEST:"largest",SMALLEST:"smallest"},H=one.Settings.extend(function(a,b){this.animDuration=this.getNumber("animDuration",a,b,E),this.alwaysMove=this.getBoolean("alwaysMove",a,b,!1),this.arrowsOnHover=this.getBoolean("arrowsOnHover",a,b,!1),this.autoScroll=this.getBoolean("autoScroll",a,b,!1),this.center=this.getBoolean("center",a,b,!1),this.distribute=this.getString("distribute",a,b,null,G),this.dropOnMouseOut=this.getBoolean("dropOnMouseOut",a,b,!1),this.extraLength=this.getNumber("extraLength",a,b,0),this.globalKeyReact=this.getBoolean("globalKeyReact",a,b,!1),this.mode=this.getString("mode",a,b,F.FREE,F),this.mouseDraggable=this.getBoolean("mouseDraggable",a,b,!0),this.mouseScrollable=this.getBoolean("mouseScrollable",a,b,!0),this.minDiffMove=this.getNumber("minDiffMove",a,b,D),this.pageMode=this.getBoolean("pageMode",a,b,!1),this.scrollOnClick=this.getBoolean("scrollOnClick",a,b,!1),this.scrollThrough=this.getValue("scrollThrough",a,b,null),this.snapDistance=this.getNumber("snapDistance",a,b,35),this.snapToItems=this.getBoolean("snapToItems",a,b,!1),this.snapWhileDragging=this.getBoolean("snapWhileDragging",a,b,!0),this.stopPropagation=this.getBoolean("stopPropagation",a,b,!0),this.stretch=this.getBoolean("stretch",a,b,!1),this.useAnimations=this.getBoolean("useAnimations",a,b,!0),this.vertical=this.getBoolean("vertical",a,b,!1),this.oneAtATime=this.getBoolean("oneAtATime",a,b,!1),this.consolidate()});H.prototype.consolidate=function(){switch(console.log("consolidate: "+this.mode),this.mode){case F.PAGE:this.autoScroll=!1,this.snapToItems=!0;break;case F.SLIDE:this.snapToItems=!0,this.autoScroll=!1;break;case F.FREE:this.snapToItems=!1}};var I=one.HtmlControl.extend(function(a,b){this.construct(a,"move","stop","select","dragstart","dragend"),this.settings=new H(a,b),this.$slides=this.$element.find("> *"),this.$container=this.$element.parent(),this.$scrollThrough=this.$element.closest(this.settings.scrollThrough),this.props=this.settings.vertical?one.HtmlControl.PROPS.VERTICAL:one.HtmlControl.PROPS.HORIZONTAL,this.$element.data("init-style",this.$element.attr("style")||""),this.$element.css({overflow:"hidden"}),this.$element.css("position")in{absolute:1,relative:1}||this.$element.css("position","relative"),this.settings.vertical?this.$element.addClass("vertical"):this.$element.css({whiteSpace:"nowrap"}),this.ready=!1,this.mouseWithinRange=!1,this.animEngaged=!1,this.dragMode=!1,this.scrollMode=!1,this.transitioning=!1,this.stripLength=0,this.autoIndex=0,this.selectedIndex=0,this.scrollMoveSize=0,this.startPos=0,this.startEventX=0,this.startEventY=0,this.minMouseX=0,this.minMouseY=0,this.maxMouseX=this.$container.outerWidth(),this.maxMouseY=this.$container.outerHeight(),this.initPos=this.$element.position()[this.props.position],this.targetPos=0,this.targetDir=0,this.wheelMultiplier=1,this.wheelAnimActive=!1,this.wheelDirection=0,this.enabled=!0,this.wheelAccellerationOn=!0,this.animSettings={easing:"easeOutExpo",step:$.proxy(p,this),start:$.proxy(o,this),complete:$.proxy(q,this),duration:this.settings.animDuration},this.proxy={mouseDown:$.proxy(z,this),mouseUp:$.proxy(C,this),slideMouseUp:$.proxy(u,this),slideClick:$.proxy(v,this),mouseWheel:$.proxy(w,this),dragEnd:$.proxy(B,this),dragMove:$.proxy(A,this),documentKeyDown:$.proxy(y,this),windowResize:$.proxy(x,this),mouseMove:$.proxy(r,this),arrowBackClick:$.proxy(s,this),arrowNextClick:$.proxy(t,this)},this.$element.on(one.dom.mouseDownEvent(),this.proxy.mouseDown),this.$element.on(one.dom.mouseUpEvent(),this.proxy.mouseUp),this.$slides.on(one.dom.mouseUpEvent(),this.proxy.slideMouseUp),this.$slides.on("click",this.proxy.slideClick),this.$container.on("mousewheel DOMMouseScroll",this.proxy.mouseWheel),$(document).on("keydown",this.proxy.documentKeyDown),$(window).on("resize",this.proxy.windowResize),$(document).on(one.dom.mouseMoveEvent(),this.proxy.mouseMove);var c=this.settings.vertical?"vertical":"";this.$arrowBack=$('<div class="flexstrip-arrow prev"></div>').addClass(c).appendTo(this.$container),this.$arrowNext=$('<div class="flexstrip-arrow next"></div>').addClass(c).appendTo(this.$container),this.$arrowBack.on("click",this.proxy.arrowBackClick),this.$arrowNext.on("click",this.proxy.arrowNextClick),this.redraw(),this.$element.addClass("ready"),this.ready=!0,this.$element.data("flexstrip",this)});I.prototype.dispose=function(){this.$arrowBack.off("click").remove(),this.$arrowNext.off("click").remove(),this.$element.off("mousedown touchstart",this.proxy.mouseDown),this.$element.off("mouseup touchend",this.proxy.mouseUp),this.$slides.off("mousemove touchmove",this.proxy.slideMouseUp),this.$slides.off("click",this.proxy.slideClick),this.$container.off("mousewheel DOMMouseScroll",this.proxy.mouseWheel),$(document).off("keydown",this.proxy.documentKeyDown),$(window).off("resize",this.proxy.windowResize),$(document).off("mousemove touchmove",this.proxy.mouseMove),this.$element.attr("style",this.$element.data("init-style")).data(J.NAME,null);for(var a=0;a<J.instances.length;a++)if(J.instances[a]==this){J.instances.splice(a,1);break}},I.prototype.redraw=function(c){var d=$.extend({},c);null==this.originalSize&&(this.originalSize=this.$element.css(this.props.size)),this.$element.css(this.props.size,this.originalSize);var e=this.$container[this.props.size]();if(0!=e){var f=(parseInt(this.$element.css(this.props.paddingStart))||0)+(parseInt(this.$element.css(this.props.paddingEnd))||0);if(d.refreshSlides&&this.$slides.off(one.dom.mouseUpEvent(),this.proxy.slideMouseUp),this.$slides=this.$element.find("> *:visible"),d.refreshSlides&&this.$slides.on(one.dom.mouseUpEvent(),this.proxy.slideMouseUp),!this.ready)for(var g=0;g<this.$slides.length;g++)this.$slides.eq(g).data("originalSize",this.$slides.eq(g)[this.props.size]());if(this.settings.mode==F.PAGE){var h=this.$slides.eq(0),i=h.css("box-sizing");if("content-box"==i){var j=(parseInt(h.css(this.props.paddingStart))||0)+(parseInt(h.css(this.props.paddingEnd))||0);e-=j}this.$slides[this.props.size](e)}else if(null!=this.settings.distribute){for(var g=0;g<this.$slides.length;g++)this.$slides.eq(g)[this.props.size](this.$slides.eq(g).data("originalSize"));if(this.settings.distribute==G.CONTAIN){var k=Math.floor(e/this.$slides.length),l=e-this.$slides.length*k;this.$slides[this.props.size](k),this.$slides.eq(this.$slides.length-1)[this.props.size](k+l)}else{for(var m=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,g=0;g<this.$slides.length;g++){var o=this.$slides.eq(g),k=o[this.props.outerSize](!0);m>k&&(m=k),k>n&&(n=k)}this.settings.distribute==G.LARGEST&&this.$slides[this.props.size](n),this.settings.distribute==G.SMALLEST&&this.$slides[this.props.size](m)}}"table"!=this.$element.css("display")&&this.$element.css(this.props.size,2e4);for(var g=0;g<this.$slides.length;g++){var p=this.$slides.eq(g);f+=p[this.props.outerSize](!0),"inline-block"==p.css("display")&&(f+=3)}this.minMouseX=0,this.minMouseY=0,this.maxMouseX=this.$container.outerWidth(),this.maxMouseY=this.$container.outerHeight(),this.isTouchDevice=one.dom.isTouchDevice(),this.containerLength=e,this.stripLength=f+this.initPos+2*this.settings.extraLength;var q=f-e;if(this.ratio=q/e,this.scrollMoveSize=Math.min(this.$slides.eq(0).outerWidth(!0),this.$slides.eq(0).outerHeight(!0)),this.maxX=this.maxY=0,this.minX=this.minY=-q,this.settings.mode==F.SLIDE){var r=this.$slides.eq(this.$slides.length-1);this.minX=this.minY=-this.stripLength+r[this.props.size]()}if(this.$element.css(this.props.size,Math.ceil(f)+1),this.snapCoords=b.call(this),this.scrollable=f>e,this.scrollable){var s=parseInt(this.$element.css(this.props.position))||0;d.maintainPosition&&(s=-this.snapCoords[this.slideIndex()]);var t=this[this.props.minPos],u=this[this.props.maxPos],v=Math.min(Math.max(s,t),u);this.$element.css(this.props.position,v),this.autoIndex=a.call(this,0)}else if(this.$element.css(this.props.position,0),
this.settings.stretch&&(this.$element.css(this.props.size,e),this.$element.css(this.props.position,0),f=e),this.settings.center){var w=Math.round(e/2-f/2);this.$element.css(this.props.position,w)}return this}},I.prototype.set=function(a,b){switch(this.base("set",a,b),this.settings.consolidate(),a){case"scrollThrough":b.jquery?this.$scrollThrough=b:this.$scrollThrough=this.$element.closest(b)}this.redraw()},I.prototype.prev=function(){return this.select(this.selectedIndex-1)},I.prototype.next=function(){return this.select(this.selectedIndex+1)},I.prototype.indexOf=function(a){for(var b=a.length?a[0]:a,c=0;c<this.$slides.length;c++)if(this.$slides[c]==b)return c;return-1},I.prototype.select=function(a,b){if(one.type.isString(a))var c=this.$slides.filter(a),d=this.indexOf(c);else d=a;return d>=0&&d<this.$slides.length&&h.call(this,d,!0,b),this},I.prototype.slideIndex=function(){return this.transitioning?this.selectedIndex:this.autoIndex},I.prototype.slide=function(a){var b=a||this.slideIndex();return this.$slides.eq(b)},I.prototype.hideArrows=function(){k.call(this,!0)},I.prototype.isAnimated=function(){return this.animationOn===!0},I.prototype.enable=function(){this.enabled=!0},I.prototype.disable=function(){this.engaged||(this.enabled=!1)};var J={};return J.create=function(a,b){if(null==a||0==a.length)return one.log.error("Specify the elements to initialize by using the expression argument");var c=[];return $(a).each(function(a,d){var e=$(d).data("flexstrip")||new I(d,b);c.push(e)}),c.length>1?c:c[0]},$.fn.flexstrip=function(){var a=Array.prototype.slice.call(arguments);this.each(function(){var b=$(this),c=b.data("flexstrip");if(!one.type.instanceOf(c,I)){var d=$.isPlainObject(a[0])?a.shift():{};c=J.create(b,d)}var e=a[0]||"redraw",f=Array.prototype.slice.call(a,1);return e&&String(e).match(/^redraw|set|prev|next|select|slideIndex$/)?c[e].apply(c,f):void 0})},J}(),one.controls.tooltip=function b(){function a(b,c,d){var e={orientation:b,arrow:{left:0,top:0}},f=null!=b.match(/T|B/),g="B";switch(b){case"T":g="B";break;case"B":g="T";break;case"L":g="R";break;case"R":g="L"}var h=f?one.HtmlControl.PROPS.VERTICAL:one.HtmlControl.PROPS.HORIZONTAL,i="top"==h.position?"bottom":"right",j=this.settings.showArrow?u.$arrow[h.size]():0;f&&(j/=2);var k=this.$element.offset(),l=$(u.document)[h.scrollPos](),m=u.offset[h.position]+k[h.position]-l,n=u.$popup[h.outerSize]()+j,o=this.$element[h.outerSize]();b.match(/T|L/)?(e[h.position]=m-n-this.settings.offset,e.arrow[h.position]="auto",e.arrow[i]=0):(e[h.position]=m+o+this.settings.offset,e.arrow[h.position]=0,e.arrow[i]="auto");var p=n>d-c;return!p&&e[h.position]<c?a.call(this,g,c,d):!p&&e[h.position]+n>d?a.call(this,g,c,d):e}function c(a,b,d,e){var f={orientation:b,arrow:{left:1,top:1}},g=null!=b.match(/T|B/);"C"==b&&(g=null!=a.match(/L|R/));var h="B";switch(b){case"T":h="B";break;case"B":h="T";break;case"L":h="R";break;case"R":h="L";break;default:h=g?"B":"R"}var i=g?one.HtmlControl.PROPS.VERTICAL:one.HtmlControl.PROPS.HORIZONTAL,j=this.settings.showArrow?u.$arrow[i.size]():0,k=this.$element.offset(),l=$(u.document)[i.scrollPos](),m=u.offset[i.position]+k[i.position]-l,n=u.$popup[i.outerSize](),o=this.$element[i.outerSize]();if(b.match(/T|L/)?(f[i.position]=m,f.arrow[i.position]=this.settings.arrowOffset):b.match(/B|R/)?(f[i.position]=m+o-n,f.arrow[i.position]=n-j-this.settings.arrowOffset):(f[i.position]=m+(o/2-n/2),f.arrow[i.position]=n/2-j/2),f.oversized=n>e-d,f.beyondFirstEdge=f[i.position]<d,f.beyondSecondEdge=f[i.position]+n>e,f.orientationRev=h,!f.oversized&&arguments.callee.caller!=arguments.callee&&(f.beyondFirstEdge||f.beyondSecondEdge)){var p=c.call(this,a,h,d,e);return"C"==b&&(p.beyondFirstEdge||p.beyondSecondEdge)&&(p=c.call(this,a,p.orientationRev,d,e)),p}return f}function d(){window.clearTimeout(r)}function e(){this.hideTooltip()}function f(){window.clearTimeout(r),u.instance&&u.instance!=this&&!u.instance.settings.hideOn.contains("mouseout")||this.settings.showOn.contains("mouseover")&&(this.$element.hasClass("tooltip-suspend")||(this.settings.showDelay>0?r=window.setTimeout(this.showTooltip,this.settings.showDelay):this.showTooltip()))}function g(){window.clearTimeout(r),u.instance==this&&this.settings.hideOn.contains("mouseout")&&(this.settings.hideDelay>0?r=window.setTimeout(this.hideTooltip,this.settings.hideDelay):this.hideTooltip())}function h(){this.settings.showOn.contains("focus")&&this.show()}function i(){this.settings.hideOn.contains("blur")&&this.hide()}function j(){u.$popup.is(":visible")&&this.settings.hideOn.contains("click")?this.hide():!u.$popup.is(":visible")&&this.settings.showOn.contains("click")&&this.show()}function k(a){u.$popup.is(":visible")&&u.instance==this&&(jQuery.contains(this.$element[0],a.target)||jQuery.contains(u.$popup[0],a.target)||this.hide())}function l(){this.hide()}function m(a){var b=u.$arrow.width(),c=u.$arrow.height(),d=u.$popup.find(".bg"),e=d.css("border-bottom-color"),f=parseInt(d.css("border-bottom-width")),g=d.css("background-color");switch(a){case"L":n(u.cL,g,e,f,function(a){a.moveTo(b/2,0),a.lineTo(0,c/2),a.lineTo(b/2,c)});break;case"R":n(u.cR,g,e,f,function(a){a.moveTo(0,0),a.lineTo(b/2,c/2),a.lineTo(0,c)});break;case"B":n(u.cB,g,e,f,function(a){a.moveTo(0,0),a.lineTo(b/2,c/2),a.lineTo(b,0)});break;case"T":n(u.cT,g,e,f,function(a){a.moveTo(0,c/2),a.lineTo(b/2,0),a.lineTo(b,c/2)})}}function n(a,b,c,d,e){var f=a.getContext("2d");f.clearRect(0,0,a.width,a.height),f.fillStyle=b,f.strokeStyle=c,f.lineWidth=d,f.beginPath(),e(f),f.fill(),d&&f.stroke()}function o(){p(),q(),$(window).resize(p),s=!0}function p(){u.offset.top=0,u.offset.left=0;var a=!1;try{u.document=top.document}catch(b){u.document=document,a=!0}if(!a){var c=window;if(window!=window.parent)for(;c!=top;){c=c.parent;for(var d=$("iframe, frame",c.document),e=!1,f=0;f<d.length;f++)if(d[f].contentWindow==window){u.offset.left+=d.eq(f).offset().left,u.offset.top+=d.eq(f).offset().top,e=!0;break}}}}function q(){if(u.$popup=$(t),u.$popup.appendTo($(u.document.body)),u.document!=document){var a=$("<style id='tooltipStyles'></style>");$(u.document.body).append(a);for(var b=[],c=one.css.findRules(".onetooltippopup"),d=0;d<c.length;d++){var e=c[d];b.push(e.css.cssText)}a.html(b.join("\n"))}u.$content=u.$popup.find(".content"),u.$arrow=u.$popup.find(".arrow");var f=u.$arrow.width(),g=u.$arrow.height(),h=$('<canvas class="b" width="{0}" height="{1}"/>'.format(f,g/2)).appendTo(u.$arrow)[0],i=$('<canvas class="t" width="{0}" height="{1}"/>'.format(f,g/2)).appendTo(u.$arrow)[0],j=$('<canvas class="l" width="{0}" height="{1}"/>'.format(f/2,g)).appendTo(u.$arrow)[0],k=$('<canvas class="r" width="{0}" height="{1}"/>'.format(f/2,g)).appendTo(u.$arrow)[0];u.cB=h,u.cT=i,u.cL=j,u.cR=k}var r,s=!1,t='<div class="onetooltippopup"><div class="arrow"></div><div class="bg"></div><div class="content"></div></div>',u={};u.instance=null,u.$popup=null,u.$arrow=null,u.document=null,u.$content=null,u.offset={left:0,top:0};var b=one.HtmlControl.extend(function(a,b){s||o(),this.construct(a),this.settings=new v(a,b),this.$element.data("tooltip",this).bind("mouseenter",$.proxy(f,this)).bind("mouseleave",$.proxy(g,this)).bind("focus",$.proxy(h,this)).bind("blur",$.proxy(i,this)).bind("click",$.proxy(j,this));var c=this.settings.content?this.$element.find(this.settings.content).html():this.$element.data("title")||this.$element.attr("title")||this.$element.attr("data-title");this.$element.data("title",c),this.$element.attr("data-title",c),this.$element.attr("title",one.string.EMPTY),this.showTooltip=$.proxy(this.show,this),this.hideTooltip=$.proxy(this.hide,this),$(u.document).on("keydown click",$.proxy(k,this)).on("scroll",$.proxy(l,this)),u.$popup.on("click",$.proxy(j,this)).on("mouseenter",$.proxy(d,this)).on("mouseleave",$.proxy(e,this))});b.prototype.hide=function(){u.$popup.hide(),u.$popup.removeClass(u.$popup.attr("class-added")),u.instance=null},b.prototype.show=function(){if(!this.$element.hasClass("tooltip-suspend")&&!this.$element.hasClass("disabled")){if(this.settings.obscureOnly){var b=this.$element[0];if(b.scrollWidth<=b.offsetWidth&&b.scrollHeight<=b.offsetHeight)return}var d=this.$element.data("title");if(d){u.$content.html(d);var e=this.settings.orientation,f=e[0].match(/T|L|R|B/)?e[0]:"T",g=e[1].match(/T|L|R|B|C/)?e[1]:"L",h=$("html",u.document)[0],i=$("body",u.document)[0],j=h.offsetWidth||i.offsetWidth,k=h.offsetHeight||i.offsetHeight;u.$popup.css({left:0,top:-1e3,display:"block"}).removeClass("t l r b -t -l -r -b"),u.$popup.addClass(this.settings.className).attr("class-added",this.settings.className),u.$arrow.toggle(this.settings.showArrow);var l,n;if(f.match(/T|B/)){l=a.call(this,f,0,k),n=c.call(this,f,g,0,j);var o={popupLeft:n.left,popupTop:l.top,arrowLeft:n.arrow.left,arrowTop:l.arrow.top,orientation:l.orientation,orientationS:n.orientation}}else l=a.call(this,f,0,j),n=c.call(this,f,g,0,k),o={popupLeft:l.left,popupTop:n.top,arrowLeft:l.arrow.left,arrowTop:n.arrow.top,orientation:l.orientation,orientationS:n.orientation};if(u.$popup.css({left:o.popupLeft,top:o.popupTop}),u.$arrow.css({left:o.arrowLeft,top:o.arrowTop}),this.settings.showArrow)switch(f){case"T":m.call(this,"B");break;case"B":m.call(this,"T");break;case"L":m.call(this,"R");break;case"R":m.call(this,"L")}u.$popup.addClass(o.orientation.toLowerCase()),u.$popup.addClass("-"+o.orientationS.toLowerCase()),u.instance=this,u.$popup.css({display:"block",opacity:1})}}},b.prototype.set=function(a,b){return!b||"showOn"!=a&&"hideOn"!=a||(b=b.split(/(?:\s*,\s*)|(?:\s+)/)),void 0!=this.settings[a]&&(this.settings[a]=b),this.settings[a]};var v=one.Settings.extend(function(a,b){this.construct(a,b),this.className=this.getString("className",a,b,null),this.followMouse=this.getBoolean("followMouse",a,b,!0),this.maxWidth=this.getString("maxWidth",a,b,null),this.showOn=this.getString("showOn",a,b,"mouseover").split(/(?:\s*,\s*)|(?:\s+)/),this.hideOn=this.getString("hideOn",a,b,"mouseout").split(/(?:\s*,\s*)|(?:\s+)/),this.orientation=this.getString("orientation",a,b,"TC").toUpperCase(),this.offset=this.getNumber("offset",a,b,3),this.showDelay=this.getNumber("show-delay",a,b,200),this.hideDelay=this.getNumber("hide-delay",a,b,0),this.obscureOnly=this.getBoolean("obscureOnly",a,b,!1),this.useFades=this.getBoolean("useFades",a,b,!1),this.showArrow=this.getBoolean("showArrow",a,b,!0),this.arrowOffset=this.getNumber("arrow-offset",a,b,5),this.content=this.getString("content",a,b,null)});return u.create=function(a,c){if(null==a||0==a.length)return one.log.error("Specify the elements to initialize by using the expression argument");var d=[];return $(a).each(function(a,e){var f=$(e).data("tooltip")||new b(e,c);d.push(f)}),d.length>1?d:d[0]},$.fn.tooltip=function(a){return this.each(function(b,c){u.create(c,a)})},u}();