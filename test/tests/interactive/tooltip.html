<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Tooltip</title>
		<script type="text/javascript" src="../../lib/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="../../lib/qunit-1.11.0.js"></script>
		<script type="text/javascript" src="../../../dist/one.js"></script>
		<script type="text/javascript" src="../../../src/controls/tooltip/tooltip.js"></script>
		<link rel="stylesheet" href="../../css/test.css"/>
		<link rel="stylesheet" href="../../lib/qunit-1.11.0.css"/>
		<link type="text/css" rel="stylesheet" href="../../../dist/controls/tooltip.css"/>
		<style>

			#a0
				{ position: fixed; width: 200px; height: 160px; background: #ccc; top: 300px; right: 460px; }
			#a1
				{ position: fixed; width: 20px; height: 20px; background: #c2c; top: 20px; right: 160px; }
			#a2
				{ position: fixed; width: 20px; height: 20px; background: #cc2; top: 50px; right: 660px; }

		</style>
	</head>
	<body>
		<div id="wrapper">
			<div id="container">
				<div id="home_perspective">
					<div id="qunit-fixture"></div>
					<h1 id="qunit-header">Tooltip</h1>
					<h2 id="qunit-banner"></h2>
					<div class="testing-area">
						<div id="a0" class="tooltip" data-orientation="TR"  title="This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and "></div>
						<div id="a1" class="tooltip" data-orientation="TR"  title="This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and This is tooltip text and "></div>
						<div id="a2" class="tooltip" data-orientation="TR"  title="Tooltip"></div>
						<span id="t1" class="tooltip" title="This is tooltip text" data-orientation="RT">Tooltip target 1</span>
					</div>
					<div id="qunit-testrunner-toolbar"></div>
					<h2 id="qunit-userAgent"></h2>
					<p id="qunit-testresult"></p>
					<ol id="qunit-tests"></ol>
					<script>

						$(function runTests()
						{
							one.controls.tooltip.create(".tooltip");
							$(".tooltip").draggable();

							test("tooltip initialization and api", function testTooltip()
							{
								var testingArea = $("div.testing-area");

								var elem1 = $("#t1");
								var ctrl1 = elem1.data("tooltip");
								equal(ctrl1 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl1.id(), "t1", "The tooltip should properly retrieve the control id");

								var elem2 = $("<h4 id='t2' title='Generated by script, obscure only' data-obscureOnly='true'>Tooltip target 2, obscure only</h4>");
								testingArea.append(elem2);
								var ctrl2 = one.controls.tooltip.spawn(elem2);
								equal(ctrl2 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl2.id(), "t2", "The tooltip should properly retrieve the control id");

								var elem3 = $("<span id='t3'>Tooltip target 3, no title = no tooltip</span>");
								testingArea.append(elem3);
								var ctrl3 = one.controls.tooltip.spawn(elem3);

								equal(ctrl3 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl3.id(), "t3", "The tooltip should properly retrieve the control id");

								var popup = one.controls.tooltip.$popup;
								ok(popup);

								ctrl1.show();
								ok(popup.is(":visible"), "The tooltip popup should show");
								ctrl1.hide();
								ok(!popup.is(":visible"), "The tooltip popup should hide");

								ctrl3.show();
								ok(!popup.is(":visible"), "The tooltip popup should not show for elements with no title text");
								ctrl3.hide();

								ctrl1.show();
								elem1.mouseout();
								ok(!popup.is(":visible"), "The tooltip popup should hide automatically");

								ctrl1.set("hideOn", "click");
								ctrl1.show();
								elem1.mouseout();
								ok(popup.is(":visible"), "The tooltip popup should remain visible after mouseout if 'hideOn' is set to 'click'");

								popup.click();
								ok(!popup.is(":visible"), "The popup should hide on click if 'hideOn' is set to 'click'");

								ctrl2.set("delay", 0);
								elem2.mouseover();
								ok(!popup.is(":visible"), "The tooltip popup should not show for fully visible elements if obscureOnly=true");
							});
						});

					</script>
				</div>
			</div>
		</div>
	</body>
</html>
